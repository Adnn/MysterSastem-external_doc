<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0069)http://www.smspower.org/Development/SMSOfficalDocs#INPUTOUTPUTIOPORTS -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript" src="./SMS Offical Docs - Development - SMS Power!_files/shares.json"></script><script type="text/javascript" src="./SMS Offical Docs - Development - SMS Power!_files/300lo.json"></script><script type="text/javascript" src="./SMS Offical Docs - Development - SMS Power!_files/_ate.track.config_resp"></script>
<title>SMS Offical Docs - Development - SMS Power!</title>

<link rel="stylesheet" title="Styled" href="./SMS Offical Docs - Development - SMS Power!_files/smspower.css" type="text/css">
<!--HTMLHeader--><style type="text/css"><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  .editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.z80 .de1, .z80 .de2 {font-family: monospace; font-weight: normal;}
.z80  {font-family:monospace;}
.z80 .imp {font-weight: bold; color: red;}
.z80 li, .z80 .li1 {font-family: monospace; color: black; font-weight: normal;}
.z80 .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.z80 .li2 {font-weight: bold;}
.z80 .kw1 {color: #006699;}
.z80 .kw2 {color: #236a40; font-weight:bold;}
.z80 .kw3 {color: #46aa03; font-weight:bold;}
.z80 .kw4 {color: blue;}
.z80 .co1 {color: #50a070; font-style: italic;}
.z80 .coMULTI {color: #50a070; font-style: italic;}
.z80 .es0 {color: #000099; font-weight: bold;}
.z80 .br0 {color: #;}
.z80 .sy0 {color: #444;}
.z80 .st0 {color: #7f007f;}
.z80 .nu0 {color: red;}
.z80 .re0 {color: red;}
.z80 .re1 {color: red;}
.z80 .re2 {color: black; font-weight:bold;}
.z80 span.xtra { display:block; }

.sourceblocklink {
  text-align: right;
  font-size: smaller;
}
.sourceblocktext {
  padding: 0.5em;
  border: 1px solid #808080;
  color: #000000;
  background-color: #f1f0ed;
}
.sourceblocktext div {
  font-family: monospace;
  font-size: small;
  line-height: 1;
  height: 1%;
}
.sourceblocktext div.head,
.sourceblocktext div.foot {
  font: italic medium serif;
  padding: 0.5em;
}

--></style>
<link rel="stylesheet" type="text/css" href="./SMS Offical Docs - Development - SMS Power!_files/attachtable.css"><script src="./SMS Offical Docs - Development - SMS Power!_files/nicetitle.js"></script><link type="text/css" href="./SMS Offical Docs - Development - SMS Power!_files/nicetitle.css" rel="stylesheet">  <meta name="robots" content="index,follow">
<link rel="stylesheet" href="./SMS Offical Docs - Development - SMS Power!_files/slimtoc.css" type="text/css"><script type="text/javascript">
function toggleToc(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = '<span>&minus;</span>';
        text.className='toc_close';
    } else {
        elstyle.display = 'none';
        text.innerHTML = '<span>+</span>';
        text.className='toc_open';
    }
}
</script>
<style type="text/css">.at-icon{fill:#fff;border:0}.at-icon-wrapper{display:inline-block;overflow:hidden}a .at-icon-wrapper{cursor:pointer}.at-rounded,.at-rounded-element .at-icon-wrapper{border-radius:12%}.at-circular,.at-circular-element .at-icon-wrapper{border-radius:50%}.addthis_32x32_style .at-icon{width:2pc;height:2pc}.addthis_24x24_style .at-icon{width:24px;height:24px}.addthis_20x20_style .at-icon{width:20px;height:20px}.addthis_16x16_style .at-icon{width:1pc;height:1pc}#at16lb{display:none;position:absolute;top:0;left:0;width:100%;height:100%;z-index:1001;background-color:#000;opacity:.001}#at16pc,#at16pi,#at16pib,#at_complete,#at_error,#at_share,#at_success{position:static!important}.at15dn{display:none}.at15a{border:0;height:0;margin:0;padding:0;width:230px}#at15s,#at16nms,#at16p,#at16p form input,#at16p label,#at16p textarea,#at16recap,#at16sas,#at_msg,#at_share .at_item{font-family:arial,helvetica,tahoma,verdana,sans-serif!important;font-size:9pt!important;outline-style:none;outline-width:0;line-height:1em}* html #at15s.mmborder{position:absolute!important}#at15s.mmborder{position:fixed!important;width:250px!important}#at15s{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpiZGBgaGAgAjAxEAlGFVJHIUCAAQDcngCUgqGMqwAAAABJRU5ErkJggg==);float:none;line-height:1em;margin:0;overflow:visible;padding:5px;text-align:left;position:absolute}#at15s a,#at15s span{outline:0;direction:ltr;text-transform:none}#at15s .at-label{margin-left:5px}#at15s .at-icon-wrapper,#at16ps .at-icon-wrapper{width:1pc;height:1pc;vertical-align:middle}#at15s .at-icon,#at16ps .at-icon{width:1pc;height:1pc}.at4-icon{display:inline-block;background-repeat:no-repeat;background-position:top left;margin:0;overflow:hidden;cursor:pointer}.addthis_16x16_style .at4-icon,.addthis_default_style .at4-icon,.at4-icon,.at-16x16{width:1pc;height:1pc;line-height:1pc;background-size:1pc!important}.addthis_32x32_style .at4-icon,.at-32x32{width:2pc;height:2pc;line-height:2pc;background-size:2pc!important}.addthis_24x24_style .at4-icon,.at-24x24{width:24px;height:24px;line-height:24px;background-size:24px!important}.addthis_20x20_style .at4-icon,.at-20x20{width:20px;height:20px;line-height:20px;background-size:20px!important}.at4-icon.circular,.circular .at4-icon,.circular.aticon{border-radius:50%}.at4-icon.rounded,.rounded .at4-icon{border-radius:4px}.at4-icon-left{float:left}#at15s .at4-icon{text-indent:20px;padding:0;overflow:visible;white-space:nowrap;background-size:1pc;width:1pc;height:1pc;background-position:top left;display:inline-block;line-height:1pc}.addthis_vertical_style .at4-icon,.at4-follow-container .at4-icon,.sortable-list-container .at4-icon{margin-right:5px}html>body #at15s{width:250px!important}#at15s.atm{background:none!important;padding:0!important;width:10pc!important}#at15s.atiemode2{width:252px!important}#at15s_inner{background:#fff;border:1px solid #fff;margin:0}#at15s_head{position:relative;background:#f2f2f2;padding:4px;cursor:default;border-bottom:1px solid #e5e5e5}.at15s_head_success{background:#cafd99!important;border-bottom:1px solid #a9d582!important}.at15s_head_success a,.at15s_head_success span{color:#000!important;text-decoration:none}#at15s_brand,#at15sptx,#at16_brand{position:absolute}#at15s_brand{top:4px;right:4px}.at15s_brandx{right:20px!important}a#at15sptx{top:4px;right:4px;text-decoration:none;color:#4c4c4c;font-weight:700}#at15s.atiemode2 a#at15sptx{right:8px}#at15sptx:hover{text-decoration:underline}#at16_brand{top:5px;right:30px;cursor:default}#at_hover{padding:4px}#at_hover .at_item,#at_share .at_item{background:#fff!important;float:left!important;color:#4c4c4c!important}#at_share .at_item .at-icon-wrapper{margin-right:5px}#at_hover .at_bold{font-weight:700;color:#000!important}#at16nms,#at16sas{padding:4px 5px}#at16nms{display:none}#at16sas{clear:left;padding-top:1pc;padding-bottom:1pc}#at_hover .at_item{width:7pc!important;padding:2px 3px!important;margin:1px;text-decoration:none!important}#at_hover .at_item.atiemode2{width:114px!important}#at_hover .at_item.athov,#at_hover .at_item:focus,#at_hover .at_item:hover{margin:0!important}#at16ps .at_item:focus,#at_hover .at_item.athov,#at_hover .at_item:focus,#at_hover .at_item:hover,#at_share .at_item.athov,#at_share .at_item:hover{background:#f2f2f2!important;border:1px solid #e5e5e5;color:#000!important;text-decoration:none}.ipad #at_hover .at_item:focus{background:#fff!important;border:1px solid #fff}#at_sending{top:130px;left:110px;position:absolute;text-align:center}#at_sending img{padding:10px}.at15t{display:block!important;height:1pc!important;line-height:1pc!important;padding-left:20px!important;background-position:0 0;text-align:left}.addthis_button,.at15t{cursor:pointer}.addthis_toolbox a.at300b,.addthis_toolbox a.at300m{width:auto}.addthis_toolbox a{margin-bottom:5px;line-height:initial}.addthis_toolbox.addthis_vertical_style{width:200px}.addthis_toolbox.addthis_close_style .addthis_button_google_plusone{width:65px;overflow:hidden}.addthis_toolbox.addthis_close_style .addthis_button_facebook_like{width:85px;overflow:hidden}.addthis_toolbox.addthis_close_style .addthis_button_tweet{width:62px;overflow:hidden}.addthis_button_facebook_like .fb_iframe_widget{line-height:100%}.addthis_button_facebook_like iframe.fb_iframe_widget_lift{max-width:none}.addthis_toolbox a.addthis_button_counter,.addthis_toolbox a.addthis_button_facebook_like,.addthis_toolbox a.addthis_button_facebook_send,.addthis_toolbox a.addthis_button_facebook_share,.addthis_toolbox a.addthis_button_foursquare,.addthis_toolbox a.addthis_button_google_plusone,.addthis_toolbox a.addthis_button_linkedin_counter,.addthis_toolbox a.addthis_button_pinterest_pinit,.addthis_toolbox a.addthis_button_stumbleupon_badge,.addthis_toolbox a.addthis_button_tweet{display:inline-block}.at-share-tbx-element .google_plusone_iframe_widget>span>div{vertical-align:top!important}.addthis_toolbox span.addthis_follow_label{display:none}.addthis_toolbox.addthis_vertical_style span.addthis_follow_label{display:block;white-space:nowrap}.addthis_toolbox.addthis_vertical_style a{display:block}.addthis_toolbox.addthis_vertical_style.addthis_32x32_style a{line-height:2pc;height:2pc}.addthis_toolbox.addthis_vertical_style .at300bs{margin-right:4px;float:left}.addthis_toolbox.addthis_20x20_style span{line-height:20px;*height:20px}.addthis_toolbox.addthis_32x32_style span{line-height:2pc;*height:2pc}.addthis_toolbox.addthis_pill_combo_style .addthis_button_compact .at15t_compact,.addthis_toolbox.addthis_pill_combo_style a{float:left}.addthis_toolbox.addthis_pill_combo_style a.addthis_button_tweet{margin-top:-2px}.addthis_toolbox.addthis_pill_combo_style .addthis_button_compact .at15t_compact{margin-right:4px}.addthis_default_style .addthis_separator{margin:0 5px;display:inline}div.atclear{clear:both}.addthis_default_style .addthis_separator,.addthis_default_style .at4-icon,.addthis_default_style .at300b,.addthis_default_style .at300bo,.addthis_default_style .at300bs,.addthis_default_style .at300m{float:left}.at300b img,.at300bo img{border:0}a.at300b .at4-icon,a.at300m .at4-icon{display:block}.addthis_default_style .at300b,.addthis_default_style .at300bo,.addthis_default_style .at300m{padding:0 2px}.at300b,.at300bo,.at300bs,.at300m{cursor:pointer}.addthis_button_facebook_like.at300b:hover,.addthis_button_facebook_like.at300bs:hover,.addthis_button_facebook_send.at300b:hover,.addthis_button_facebook_send.at300bs:hover{opacity:1;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100)}.addthis_20x20_style .at15t,.addthis_20x20_style .at300bs,.addthis_20x20_style .dummy .at300bs{overflow:hidden;display:block;height:20px!important;width:20px!important;line-height:20px!important}.addthis_32x32_style .at15t,.addthis_32x32_style .at300bs,.addthis_32x32_style .dummy .at300bs{overflow:hidden;display:block;height:2pc!important;width:2pc!important;line-height:2pc!important}.at300bs{background-position:0 0}.at16nc,.at300bs{overflow:hidden;display:block;height:1pc;width:1pc;line-height:1pc!important}.at16t{padding-left:20px!important;width:auto;cursor:pointer;text-align:left;overflow:visible!important}#at_feed{display:none;padding:10px;height:300px}#at_feed span{margin-bottom:10px;font-size:9pt}#at_feed div{width:102px!important;height:26px!important;line-height:26px!important;float:left!important;margin-right:68px}#at_feed div.at_litem{margin-right:0}#at_feed a{margin:10px 0;height:17px;line-height:17px}#at_feed.atused .fbtn{background:url(//s7.addthis.com/static/r05/feed00.gif) no-repeat;float:left;width:102px;cursor:pointer;text-indent:-9000px}#at_feed .fbtn.bloglines{background-position:0 0!important;width:94px;height:20px!important;line-height:20px!important;margin-top:8px!important}#at_feed .fbtn.yahoo{background-position:0 -20px!important}#at_feed .fbtn.newsgator,.fbtn.newsgator-on{background-position:0 -37px!important}#at_feed .fbtn.technorati{background-position:0 -71px!important}#at_feed .fbtn.netvibes{background-position:0 -88px!important}#at_feed .fbtn.pageflakes{background-position:0 -141px!important}#at_feed .fbtn.feedreader{background-position:0 -172px!important}#at_feed .fbtn.newsisfree{background-position:0 -207px!important}#at_feed .fbtn.google{background-position:0 -54px!important;width:78pt}#at_feed .fbtn.winlive{background-position:0 -105px!important;width:75pt;height:19px!important;line-height:19px;margin-top:9px!important}#at_feed .fbtn.mymsn{background-position:0 -158px;width:71px;height:14px!important;line-height:14px!important;margin-top:9pt!important}#at_feed .fbtn.aol{background-position:0 -189px;width:92px;height:18px!important;line-height:18px!important}.addthis_default_style .at15t_compact,.addthis_default_style .at15t_expanded{margin-right:4px}#at16clb{font-size:16pt;font-family:verdana bold,verdana,arial,sans-serif}#at_share .at_item{width:123px!important;padding:4px;margin-right:2px;border:1px solid #fff}#at16pm{background:#fff;width:298px;height:380px;text-align:left;border-right:1px solid #ccc;position:static}#at16pcc,#at16pccImg{position:fixed;top:0;left:0;width:100%;margin:0 auto;font-size:10px!important;color:#4c4c4c;padding:0;z-index:10000001;overflow:visible}#at16pccImg{height:100%}#at16abifc{overflow:hidden;margin:0;top:10px;left:10px;height:355px;width:492px;position:absolute;border:0}#at16abifc iframe{border:0;position:absolute;height:380px;width:516px;top:-10px;left:-10px}* html div#at16abifc.atiemode2{height:374px;width:482px}* html #at16abifc iframe{height:23pc;left:-10px;top:-10px;overflow:hidden}#at16p{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpiZGBgaGAgAjAxEAlGFVJHIUCAAQDcngCUgqGMqwAAAABJRU5ErkJggg==);z-index:10000001;position:absolute;top:50%;left:50%;width:300px;padding:10px;margin:0 auto;margin-top:-185px;margin-left:-155px;font-family:arial,helvetica,tahoma,verdana,sans-serif;font-size:9pt;color:#5e5e5e}#at_share{margin:0;padding:0}#at16ps{overflow-y:scroll;height:19pc;padding:5px}a#at16pit{position:absolute;top:37px;right:10px;display:block;background:url(data:image/gif;base64,R0lGODlhEAAUAKIFAKqqquHh4cLCwszMzP///////wAAAAAAACH5BAEAAAUALAAAAAAQABQAAAMtOLqsAqWQSSsN0OoLthfeNoTaSFbmOaUqe7okHMoeLaqUXeITiGM/SGM4eEQSADs=) no-repeat;width:1pc;height:20px;line-height:19px;margin-right:-17px;text-align:center;overflow:hidden;color:#36b}#at16pi{background:#e5e5e5;text-align:left;border:1px solid #ccc;border-bottom:0}#at16pi a{text-decoration:none;color:#36b}#at16p #at16abc{margin-left:2px!important}#at16pi a:hover{text-decoration:underline}#at16pt{position:relative;background:#f2f2f2;height:13px;padding:5px 10px}#at16pt a,#at16pt h4{font-weight:700}#at16pt h4{display:inline;margin:0;padding:0;font-size:9pt;color:#4c4c4c;cursor:default}#at16pt a{position:absolute;top:5px;right:10px;color:#4c4c4c;text-decoration:none;padding:2px}#at15sptx:focus,#at16pt a:focus{outline:thin dotted}#at16pc form{margin:0}#at16pc form label{display:block;font-size:11px;font-weight:700;padding-bottom:4px;float:none;text-align:left}#at16pc form label span{font-weight:400;color:#4c4c4c;display:inline}#at16pc textarea{height:3pc}#at16pc form input:focus,#at16pc textarea:focus{background:ivory;color:#333}#at16p .atbtn,#at16recap .atbtn{background:#fff;border:1px solid #b5b5b5;width:60px!important;padding:2px 4px;margin:0;margin-right:2px!important;font-size:11px!important;font-weight:700;color:#333;cursor:pointer}#at16p .atbtn:focus,#at16p .atbtn:hover,#at16recap .atbtn:focus,#at16recap .atbtn:hover{border-color:#444;color:#06c}#at16p .atrse,#at16recap .atrse{font-weight:400!important;color:#666;margin-left:2px!important}#atsb .atbtn{width:78px!important;margin:0!important}#at16pc{height:343px!important;font-size:11px;text-align:left;color:#4c4c4c}#at16psf{position:relative;background:#f2f2f2 url(data:image/gif;base64,R0lGODlhGQEVAMQYAGZmZuDg4Ozs7MjIyMzMzPj4+LOzs3BwcMbGxsvLy5+fn/X19djY2IODg+bm5paWlnl5eeLi4oyMjKmpqdXV1dvb28/Pz////////wAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAABgALAAAAAAZARUAAAX/ICaOGJFYaKqubOu+cCzPdG3feK7vPJwQpOBoEChcjsikcslsOp/QqHRKrVqv2Kx2Gy0EBkKRgMEtm8/otHrNTjMEQYGjTa/b7/h82gEfVfSAgYKDhGcVQ0sLBhAAEAYLhZGSk5RqYBgBSgsNAA0GnA2QlaOkpaZHASVGSQYACEgIABOntLW2eAUmSxASShIHt8HCw1snSwAGSq3EzM3OSyhLBw9KD8DP2Nm30UoKrrAACtrj5KMWCYmcCgbeAAcR5fHygT+rSQvtAA8A7vDz/wDV5MIUJVa/gAgTZkmFYYAUg70USpz45BKGPwUPiKPIseOhEXI6ihzphE8cMiRTMI58E6ZhEZUwEXqx2LIEAwsUKujcybOnz59AgwodSrSo0aNIkypdyrSpU58ofoQJAQA7) no-repeat center center;border-bottom:1px solid #ccc;height:20px;padding:4px 10px;text-align:center}* html #at16psf input,:first-child+html #at16psf input{padding:0}#at16psf input,#at16psf input:focus{background:#fff;border:none;width:220px;margin:2px 0 0;color:#666;outline-style:none;outline-width:0;padding:2px 0 0;line-height:9pt;font-family:arial,helvetica,tahoma,verdana,sans-serif;font-size:9pt}#at16pcc .at_error,#at16recap .at_error{background:#f26d7d;border-bottom:1px solid #df5666;padding:5px 10px;color:#fff}#at16pcc #at_success{background:#d0fbda;border-bottom:1px solid #a8e7b7;padding:5px 10px;color:#4c4c4c}#at_complete{font-size:13pt;color:#47731d;text-align:center;padding-top:130px;height:13pc!important;width:472px}.at_baa{display:block;overflow:hidden;outline:0}#at15s #at16pf a{top:1px}#at16pc form #at_send{width:5pc!important}#at16pp{color:#4c4c4c;position:absolute;top:9pt;right:9pt;font-size:11px}#at16pp label{font-size:11px!important}#at16pp .atinp{width:156px}#at16eatdr{position:absolute;background:#fff;border-top:0;max-height:110px;overflow:auto;z-index:500;top:129px;left:21px;width:277px}#at16eatdr a{display:block;overflow:hidden;border-bottom:1px dotted #eee;padding:4px 8px}#at16eatdr a.hover,#at16eatdr a:hover{background:#e0eefa;text-decoration:none;color:#333}#at_pspromo{height:130px;padding-top:10px}#at15psp,#at_pspromo{width:205px;padding-left:5px}#at_testpromo{font-size:9pt;width:220px;display:none}.atm-i #at_pspromo{height:150px}.atm-i #at_pspromo,.atm-i #at_testpromo{width:140px}#at_testpromo input{width:200px}#at_promo .at-promo-content,#at_testpromo .at-promo-content{margin-top:9pt}#at_promo .at-promo-btn,#at_testpromo .at-promo-btn{padding-top:10px}#at_promo h4,#at_testpromo h4{font-family:arial,helvetica,tahoma,verdana,sans-serif;background:0;font-size:14px;font-weight:700;margin:0 0 4px;padding:0;line-height:18px;height:36px}.atm-i #at_promo h4,.atm-i #at_testpromo h4{height:66px}#at_testpromo h4{font-size:13.5px}#at_promo h4 sup{font-size:11px;color:#ee6a44}#at_promo span{display:block}#_atssh{width:1px!important;height:1px!important;border:0!important}.at-promo-single{padding:10px;padding-top:2px;line-height:1.5em}.at-promo-single img{padding:3px}.at-promo-content img{margin-right:5px;margin-bottom:20px;float:left}.atm{width:10pc!important;padding:0;margin:0;line-height:9pt;letter-spacing:normal;font-family:arial,helvetica,tahoma,verdana,sans-serif;font-size:9pt;color:#444;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABtJREFUeNpiZGBgaGAgAjAxEAlGFVJHIUCAAQDcngCUgqGMqwAAAABJRU5ErkJggg==);padding:4px}.atm-f{text-align:right;border-top:1px solid #ddd;padding:5px 8px}.atm-i{background:#fff;border:1px solid #d5d6d6;padding:0;margin:0;box-shadow:1px 1px 5px rgba(0,0,0,.15)}.atm-s{margin:0!important;padding:0!important}.atm-s a:focus{border:transparent;outline:0;-webkit-transition:none;transition:none}#at_hover.atm-s a,.atm-s a{display:block;text-decoration:none;padding:4px 10px;color:#235dab!important;font-weight:400;font-style:normal;-webkit-transition:none;transition:none}#at_hover.atm-s .at_bold{color:#235dab!important}#at_hover.atm-s a:hover,.atm-s a:hover{background:#2095f0;text-decoration:none;color:#fff!important}#at_hover.atm-s .at_bold{font-weight:700}#at_hover.atm-s a:hover .at_bold{color:#fff!important}.atm-s a .at-label{vertical-align:middle;margin-left:5px;direction:ltr}.atm-i #atic_settings{border:none!important;border-top:1px solid #d5d6d6!important;padding-top:6px!important;top:4px}.at_a11y{position:absolute!important;top:auto!important;width:1px!important;height:1px!important;overflow:hidden!important}.at_a11y_container{margin:0;padding:0}.at_redloading{background:url(data:image/gif;base64,R0lGODlhCgAKAJEDAMzMzP9mZv8AAP///yH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAADACwAAAAACgAKAAACF5wncgaAGgJzJ647cWua4sOBFEd62VEAACH5BAUAAAMALAEAAAAIAAMAAAIKnBM2IoMDAFMQFAAh+QQFAAADACwAAAAABgAGAAACDJwHMBGofKIRItJYAAAh+QQFAAADACwAAAEAAwAIAAACChxgOBPBvpYQYxYAIfkEBQAAAwAsAAAEAAYABgAAAgoEhmPJHOGgEGwWACH5BAUAAAMALAEABwAIAAMAAAIKBIYjYhOhRHqpAAAh+QQFAAADACwEAAQABgAGAAACDJwncqi7EQYAA0p6CgAh+QQJAAADACwHAAEAAwAIAAACCpRmoxoxvQAYchQAOw==);height:1pc;width:1pc;background-repeat:no-repeat;margin:0 auto}.at-promo-single-dl-ch{width:90pt;height:37px}.at-promo-single-dl-ff{width:90pt;height:44px}.at-promo-single-dl-saf{width:90pt;height:3pc}.at-promo-single-dl-ie{width:129px;height:51px}.at_PinItButton{display:block;width:40px;height:20px;padding:0;margin:0;background-image:url(//s7.addthis.com/static/t00/pinit00.png);background-repeat:no-repeat}.at_PinItButton:hover{background-position:0 -20px}.addthis_toolbox .addthis_button_pinterest_pinit{position:relative}.at-share-tbx-element .fb_iframe_widget span{vertical-align:baseline!important}.service-icon{padding:4px 8px}.service-icon:hover{background:#2095f0;color:#fff}.service-icon span{padding-left:20px}#at16pf{height:auto;text-align:right;padding:4px 8px}.at-privacy-info{position:absolute;left:7px;bottom:7px;cursor:pointer;text-decoration:none;font-family:helvetica,arial,sans-serif;font-size:10px;line-height:9pt;letter-spacing:.2px;color:#666}.at-privacy-info:hover{color:#000}.body .wsb-social-share .wsb-social-share-button-vert{padding-top:0;padding-bottom:0}.body .wsb-social-share.addthis_counter_style .addthis_button_tweet.wsb-social-share-button{padding-top:44px}.body .wsb-social-share.addthis_counter_style .addthis_button_google_plusone.wsb-social-share-button{padding-top:4px}@media print{#at4-follow,#at4-share,#at4-thankyou,#at4-whatsnext,#at4m-mobile,#at15s,.at4,.at4-recommended{display:none!important}}@media screen and (max-width:400px){.at4win{width:100%}}@media screen and (max-height:700px) and (max-width:400px){.at4-thankyou-inner .at4-recommended-container{height:122px;overflow:hidden}.at4-thankyou-inner .at4-recommended .at4-recommended-item:first-child{border-bottom:1px solid #c5c5c5}}</style><style type="text/css">.at-branding-logo{font-family:helvetica,arial,sans-serif;text-decoration:none;font-size:10px;display:inline-block;margin:2px 0;letter-spacing:.2px}.at-branding-logo .at-branding-icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAMAAAC67D+PAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////+GlNUkcc1QAAAB1JREFUeNpiYIQDBjQmAwMmkwEM0JnY1WIxFyDAABGeAFEudiZsAAAAAElFTkSuQmCC")}.at-branding-logo .at-branding-icon,.at-branding-logo .at-privacy-icon{display:inline-block;height:10px;width:10px;margin-left:4px;margin-right:3px;margin-bottom:-1px;background-repeat:no-repeat}.at-branding-logo .at-privacy-icon{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAKCAMAAABR24SMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABhQTFRF8fr9ot/xXcfn2/P5AKva////////AKTWodjhjAAAAAd0Uk5T////////ABpLA0YAAAA6SURBVHjaJMzBDQAwCAJAQaj7b9xifV0kUKJ9ciWxlzWEWI5gMF65KUTv0VKkjVeTerqE/x7+9BVgAEXbAWI8QDcfAAAAAElFTkSuQmCC")}.at-branding-logo span{text-decoration:none}.at-branding-logo .at-branding-addthis,.at-branding-logo .at-branding-powered-by{color:#666}.at-branding-logo .at-branding-addthis:hover{color:#333}.at-cv-with-image .at-branding-addthis,.at-cv-with-image .at-branding-addthis:hover{color:#fff}a.at-branding-logo:visited{color:initial}.at-branding-info{display:inline-block;padding:0 5px;color:#666;border:1px solid #666;border-radius:50%;font-size:10px;line-height:9pt;opacity:.7;transition:all .3s ease;text-decoration:none}.at-branding-info span{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.at-branding-info:before{content:'i';font-family:Times New Roman}.at-branding-info:hover{color:#0780df;border-color:#0780df}</style><script type="text/javascript" charset="utf-8" async="" src="./SMS Offical Docs - Development - SMS Power!_files/menu.bb539d41a97cf1854481.js"></script><script type="text/javascript" charset="utf-8" async="" src="./SMS Offical Docs - Development - SMS Power!_files/counter.461320192997d4a10094.js"></script><style type="text/css">.addthis_counter{font-weight:700;display:inline-block;border:0;outline:0;cursor:pointer;color:#fff}.addthis_counter a{display:block;font-family:arial,helvetica,sans-serif!important;text-decoration:none!important;border:0}.addthis_counter{text-decoration:none!important;text-align:left}.addthis_counter .addthis_button_expanded{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAACaCAMAAADcrusAAAAA21BMVEX////+bUznWjrnWjrBwcGJiYnm5ubFxcWMjIyRkZH39/f19fX////nWjr+bUzys6n+uq7/7+z87evqd2H+hm3/5+P+sKPxqJz65OH/9/b+el3paU//zcT2yMDshXH99vX+kXz+nIn/w7n0vrX30cz9bEv/3tn529f/1s/ukYH3aUn+ppbvnY/bUjTmWTn/3dX+9fP3aEj/9vT52NH/5d/aUTP9a0r74tzlWDjfWz386+f/7en4b1H/7uv4b1D/3db/9/X/7uraUjT+9vT87Oj87OnpZEb52dH+dlezszuQAAAABHRSTlMAExMAzBw6IQAAAnlJREFUeF6009eKKzEMBuBJriW5T2/pPdvbqb28/xMdGbOQiyxZZ9n/QnjAH8KWJxl8uqeI3H8ZJFcUmatkFktmCUXnXHIBIRevJ/AcBuUSQI0onZ8k1/QxkNqVJIvyNPl8S1/ZMFkuuYxtqhQoS2MA1RNIGKUArjwk/4Lk0jtXp0QpjEjJHiw5SbzZQlo6eUi+fafba0985LKwqSOqJdNaMdmQ5O+NOn6WYsNlPk7nnvRF6iF3lOBz/MZqZ6kvZCBS+bUn1h/MvTCXmumYArEKijlYJr6N6t8y/fcn5zz+dfwvNlhH9ZmtB8nw6REj8vg0TO4wMnfJPpbsE4zOueQGQm5eT+A5DKopgF5htjhJLvFDIE1eoeiq0+T3A/5lw2Q65TIxmdagDU4AdIsgYJUB5NUh+RMklzbPmwwxgxVq0YLBXCBvNpBVuTgkP3/hw6UnPmLamSxHbATTRjPZouDvrT5+lm7LZTHJFp60XeYhdxTgc/zGmtxg24lAhPZrT4w/WP7CXBqmEwzEaOgWYJj4Nrp9y/Tfn5zz+Hex5Ecy3EX12e+G/9mrQxUAYBgGooEFAm3//3snZmviJnL+6cMRrXSgHqsWOGb8iISEhISEqDxRAsSld5De/nLbr4MViEEYDMI5mFQ3ff/nXejx33YHcyqtc/8QQSXaRYfJZpAaFWx2FdwfMXyqYdYjp4punpP5fcgiiyyyyCKVl9+6nxQHCP+t20WHCTdIjQo2KjgDAT/Y7UQk/li1tkPtyaQlEhBARABBUV+lvhc1rz4w+FX4bKWLrA0cp7Ue+KhqnpA/mXggAQFEBBAU9VXqe1HzzgNTv2Iyx9Dc8gWOjkKMG1wfQQAAAABJRU5ErkJggg==');background-repeat:no-repeat;display:inline-block}.addthis_counter .atc_s{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAAFVBMVEUAAAD///////////////////////9Iz20EAAAABnRSTlMAwPm7kB4+mBDvAAAAP0lEQVQI12MIVksDgyRTBrM0KEhmAApChRnS4ACdKcCIl5ko6MAiKAZmJjAAARsKE6GAsGE43IBwJLLTER4CAHvvQkc3Hji8AAAAAElFTkSuQmCC');background-size:10px;background-repeat:no-repeat;background-color:#fe6d4c;background-position:5px 5px;display:inline-block;border-radius:2px;min-width:25px;text-decoration:none}.addthis_counter .atc_s:hover{background-color:#e75a3a}.addthis_counter.addthis_bubble_style{background-image:url('data:image/gif;base64,R0lGODlhUgBkAKIEAOrq6sLCwoWFhf///////wAAAAAAAAAAACH5BAEAAAQALAAAAABSAGQAAAP/SLoa/jDKSetkOGsdwPhgKI5kaYpAsK1sd75wPKZsjQVyrpuq7eO7YLDnqwGFyBixuDomn6UlkwOtkqTTm3ULwmYXTi7U+3WJreSp+VxNF9fs8ZcBjz/dRo8dPSfU90l4TXqAcn1/hTuCLYSJQ31gjY45i3mTipB0kpcnlTZhnDyZdKFKo2ClMJ5GqS+rLa2dpw2xorOgtR+vg7kou7y9AzSzYBbGx8gRxAwCzc7P0NHS09TSywoCm60AAsvZwSDcxALgId2z5OUf56fp6uyj7uXwmfLg9JD2wfh9+r38X76pGwBwisCBBYscRFhP2718Dh/OWThwXb+IEidi/New+SKIhD4ozmu3sRVIhSVLnVRYcWXIluNgopPZjmY8m/VwQlQnblxKRz29VRtKtCg0YsmSOsBgtGmzNz9zDCMgEkpQWGyI+KuyElebBVuhdI2jNc5JRF+pRtUBEu3XqlYSum0DNy6jPQHqcrVEVq2ds2spYQssY2xWsGZ/9MWW+NNiqo35cpmqV8jVFkqTMXVqlEnmz1I4i4Y3twplwjqCehVTthC71VxaA3qdSPYe2oVs/0WVG7HrBqgx+f1deouKylsEFDeOPPlyNM3tPpcTXSzw2oMT4QakOzJs475n8+Ye/vZ4vOV30+rN+Pf1PacBXQWdefPopgQSAAA7');background-repeat:no-repeat}.addthis_counter a.atc_s{font-size:11px;font-weight:100;color:#fff;padding:0 5px 0 20px;line-height:20px;overflow:hidden;cursor:pointer;-webkit-transition:none;transition:none}.addthis_counter .atc_s-span,.addthis_counter a.atc_s{display:block;height:20px}.addthis_counter .addthis_button_expanded.at300m .at4-icon{display:none!important}.addthis_counter a.addthis_button_expanded:hover,.addthis_counter.addthis_pill_style a.addthis_button_expanded:hover{text-decoration:none;color:#000}.addthis_counter .addthis_button_expanded{display:block;background-repeat:no-repeat;background-position:0 -40px;width:50px;height:33px;line-height:33px;padding-bottom:4px;margin-bottom:3px;text-align:center;text-decoration:none;font-size:1pc;font-weight:700;color:#333}.addthis_counter{vertical-align:top}.addthis_counter.addthis_native_counter .addthis_button_expanded{font-weight:400}* html .addthis_counter.compatmode0 .addthis_button_expanded{padding-bottom:0!important}* html .addthis_counter .addthis_button_expanded{height:37px}.addthis_counter .addthis_button_expanded:hover{background-position:0 -77px;cursor:pointer;color:#000}.addthis_counter .addthis_button_expanded .at300bs{display:none!important}.addthis_counter.addthis_pill_style{display:block;height:25px;overflow:hidden}.addthis_counter.addthis_pill_style a.atc_s{float:left}.addthis_counter.addthis_pill_style a.addthis_button_expanded{display:none;background-repeat:no-repeat;background-position:0 -114px;width:34px!important;height:20px;line-height:20px;margin:0 0 0 3px;padding:0 0 0 4px;float:left;text-align:center;text-decoration:none;font-family:arial,helvetica,sans-serif;font-weight:700;font-size:11px;color:#333;-ms-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box}.addthis_counter.addthis_pill_style.addthis_nonzero a.addthis_button_expanded{display:block!important;-webkit-transition:none;transition:none}.addthis_counter.addthis_pill_style a.addthis_button_expanded:hover{background-position:0 -134px!important}.addthis_counter.addthis_bubble_style{margin:0 0 0 -2px;text-align:center;font-weight:700;font-family:arial,helvetica,sans-serif;color:#000;background-repeat:no-repeat;background-position:0 -4pc;padding:0 0 0 4px;height:1pc;width:2pc!important;-ms-box-sizing:content-box;-o-box-sizing:content-box;box-sizing:content-box}.addthis_native_counter_parent .addthis_counter.addthis_bubble_style{background-position:0 -4pc!important}.addthis_counter.addthis_bubble_style.addthis_native_counter{margin:0 2px}.addthis_counter.addthis_bubble_style a.addthis_button_expanded{font-size:11px;height:1pc;line-height:1pc;width:34px;background:none}.addthis_counter.addthis_bubble_style:hover{background-position:-36px -4pc!important}.addthis_20x20_style .addthis_counter.addthis_bubble_style{background-repeat:no-repeat;background-position:0 -5pc!important;height:20px;width:35px!important;line-height:20px;padding:0 0 0 6px}.addthis_20x20_style .addthis_counter.addthis_bubble_style:hover{background-position:-41px -5pc!important}.addthis_20x20_style .addthis_counter.addthis_bubble_style a.addthis_button_expanded{background:none;font-size:9pt;line-height:20px;height:20px;margin:0;width:35px!important;padding:0!important}.addthis_20x20_style .addthis_counter.addthis_bubble_style.addthis_native_counter a.addthis_button_expanded{font-size:11px}.addthis_32x32_style .addthis_counter.addthis_bubble_style,.addthis_32x32_white_style .addthis_counter.addthis_bubble_style{background-repeat:no-repeat;background-position:0 0!important;height:2pc;width:56px!important;line-height:2pc;padding:0 0 0 6px}.addthis_32x32_style .addthis_counter.addthis_bubble_style a.addthis_button_expanded,.addthis_32x32_white_style .addthis_counter.addthis_bubble_style a.addthis_button_expanded{background:none;font-size:1pc;line-height:2pc;height:2pc;margin:0;width:56px!important;padding:0!important}.addthis_32x32_style .addthis_counter.addthis_bubble_style:hover,.addthis_32x32_white_style .addthis_counter.addthis_bubble_style:hover{background-position:0 -2pc!important}.addthis_counter.addthis_bubble_style .atc_s{display:none!important}* html .addthis_counter.addthis_bubble_style{width:36px!important;display:inline}* html .addthis_counter.bubblecompatmode0{width:2pc!important;display:block}* html .addthis_counter.addthis_bubble_style a.addthis_button_expanded{width:24px!important;height:14px!important;line-height:14px!important;padding:0;margin-top:1px!important;display:inline}* html .addthis_counter.bubblecompatmode0 a.addthis_button_expanded{width:36px}* html .addthis_32x32_style .addthis_counter.addthis_bubble_style{width:60px!important}* html .addthis_32x32_style .addthis_counter.addthis_bubble_style a.addthis_button_expanded{width:46px;height:26px!important;line-height:26px!important;margin-top:2px!important}* html .addthis_32x32_style .addthis_counter.bubblecompatmode0 a.addthis_button_expanded{height:2pc!important;line-height:2pc!important}</style><style></style></head>
<body>
	<div id="wrap" class="clearfix">
<!--PageHeaderFmt-->
		<div id="header">
			<table width="100%"><tbody><tr>
			<td align="left" valign="middle">
				<h1><a href="http://www.smspower.org/"><img src="./SMS Offical Docs - Development - SMS Power!_files/logo.png" alt="SMS Power!" width="204" height="50" nicetitle="SMS Power!"></a></h1>
			</td><td align="center" valign="middle">
				<div class="nowrap" style="text-align: center;"> 
<h2><a class="wikilink" href="http://www.smspower.org/Development/Index">Development</a></h2>
<p><span style="font-size:83%">Sega Master System / Mark III / Game Gear<br>SG-1000 / SC-3000 / SF-7000 / OMV</span>
</p></div>

			</td><td align="right" valign="top">
				<p><a name="top" id="top"></a>
<a class="wikilink" href="http://www.smspower.org/">Home</a> - <a class="wikilink" href="http://www.smspower.org/forums/">Forums</a> - <a class="wikilink" href="http://www.smspower.org/Games/Index">Games</a> - <a class="wikilink" href="http://www.smspower.org/Scans/Index">Scans</a> - <a class="wikilink" href="http://www.smspower.org/Maps/Index">Maps</a> - <a class="wikilink" href="http://www.smspower.org/Cheats/Index">Cheats</a> - <a class="wikilink" href="http://www.smspower.org/Credits/Index">Credits</a><br><a class="wikilink" href="http://www.smspower.org/Music/Index">Music</a> - <a class="wikilink" href="http://www.smspower.org/Videos/Index">Videos</a> - <a class="wikilink" href="http://www.smspower.org/Development/Index">Development</a> - <a class="wikilink" href="http://www.smspower.org/Hacks/Index">Hacks</a> - <a class="wikilink" href="http://www.smspower.org/Translations/Index">Translations</a> - <a class="wikilink" href="http://www.smspower.org/Homebrew/Index">Homebrew</a>
</p><form action="http://www.smspower.org/Development/SMSOfficalDocs" method="get"><input type="hidden" name="action" value="search"><input type="search" name="q" value="" size="40"><input type="submit" name="" value="Search" class="inputbutton"><input type="checkbox" name="group" value="Development" id="group"><label for="group">Development only</label></form>
<div id="menubar"> 
<ul><li><a class="wikilink" href="http://www.smspower.org/forums/login.php?redirect=redirect.php%3fn%3dDevelopment/SMSOfficalDocs">Login</a>
</li><li><a class="forumtopiclink" href="http://www.smspower.org/forums/viewtopic.php?t=12440">Report an error</a>
</li><li><a rel="nofollow" class="wikilink" href="http://www.smspower.org/Development/SMSOfficalDocs?action=print">Print</a>
</li><li><a class="wikilink" href="http://www.smspower.org/Development/SMSOfficalDocs?setlang=en"><img src="./SMS Offical Docs - Development - SMS Power!_files/en.png" alt="english" nicetitle="english"></a> <a class="wikilink" href="http://www.smspower.org/Development/SMSOfficalDocs?setlang=ja"><img src="./SMS Offical Docs - Development - SMS Power!_files/ja.png" alt="日本語" nicetitle="日本語"></a> <a class="wikilink" href="http://www.smspower.org/Development/SMSOfficalDocs?setlang=pt-br"><img src="./SMS Offical Docs - Development - SMS Power!_files/pt-br.png" alt="português brasileiro" nicetitle="português brasileiro"></a> 
</li></ul></div>

			</td></tr></tbody></table>
			
<!--PageTitleFmt-->
			<h2 class="pagetitle">SMS Offical Docs</h2>

<!--/PageTitleFmt-->
			<hr>
		</div>
<!--/PageHeaderFmt-->
		<!--PageText-->
<div id="wikitext">
<h1>Software Reference Manual for the SEGA Mark III Console</h1>
<div class="toc">
<div style="cursor: pointer;" class="tocheader" onclick="javascript:toggleToc(&#39;tocid1&#39;);"><span style="cursor: pointer;" id="tocid1tog" class="toc_close"><span>+</span></span><a name="toc1" id="toc1"></a>Contents
</div>
<div class="toclist" id="tocid1">
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#TheSegaMarkIIIGameConsole">The Sega Mark III Game Console</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#HEADINGS">HEADINGS</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#FORWARDREFERENCES">FORWARD REFERENCES</a>
</li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#THECPU">THE CPU</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#RESET">RESET</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#INTERRUPTSYSTEM">INTERRUPT SYSTEM</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#NMI">NMI</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#INT">INT</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#InterruptEnableBits">Interrupt Enable Bits</a>
</li></ul></li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#THEVIDEODISPLAYPROCESSORVDP">THE VIDEO DISPLAY PROCESSOR (VDP)</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#VIDEORAMORGANIZATION">VIDEO RAM ORGANIZATION</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#COLOR">COLOR</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#BACKGROUNDSYSTEM">BACKGROUND SYSTEM</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#SCROLLINHIBITBITS">SCROLL INHIBIT BITS</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#SPRITES">SPRITES</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#SPRITEATTRIBUTETABLE">SPRITE ATTRIBUTE TABLE</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#SpriteAttributeTableOrganization">Sprite Attribute Table Organization</a>
</li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#SPRITEBACKGROUNDDISPLAYPRIORITY">SPRITE/BACKGROUND DISPLAY PRIORITY</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#COLORRAM">COLOR RAM</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#CHARACTERPATTERNS">CHARACTER PATTERNS</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#ANEXAMPLECHARACTERPATTERN">AN EXAMPLE CHARACTER PATTERN</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#VDPREGISTERS">VDP REGISTERS</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#ReadVDPRAM">Read VDP RAM</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#WriteVDPRAM">Write VDP RAM</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#WriteVDPRegister">Write VDP Register</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#WriteVDPColorRAM">Write VDP Color RAM</a>
</li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#VDPREGISTERUPDATES">VDP REGISTER UPDATES</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#VDPREGISTERDESCRIPTION">VDP REGISTER DESCRIPTION</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register0">Register 0</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register1">Register 1</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register2">Register 2</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register3">Register 3</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register4">Register 4</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register5">Register 5</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register6">Register 6</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register7">Register 7</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register8">Register 8</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register9">Register 9</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#Register10">Register 10</a>
</li></ul></li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#MEMORYMANAGEMENT">MEMORY MANAGEMENT</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#SYSTEMRAM">SYSTEM RAM</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#MEMORYENABLES">MEMORY ENABLES</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#OUT3E">OUT ($3E)</a>
</li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#MEMORYSELECTIONATPOWERON">MEMORY SELECTION AT POWER-ON</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#MEMORYMAPS">MEMORY MAPS</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#x32KILOBYTES">32 KILOBYTES</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#x128KILOBYTES">128 KILOBYTES</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#THECARTRIDGEHEADER">THE CARTRIDGE HEADER</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#At7FF0">At $7FF0</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#At7FFA7FFB">At $7FFA-$7FFB</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#At7FFC7FFD">At $7FFC-$7FFD</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#At7FFE">At $7FFE</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#At7FFF">At $7FFF</a>
</li></ul></li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#INPUTOUTPUTIOPORTS">INPUT/OUTPUT (I/O) PORTS</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#HOWTHEGUNWORKS">HOW THE GUN WORKS</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#HOWTHETRACKBALLWORKS">HOW THE TRACKBALL WORKS</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#ProgramSequenceToReadTrackball">Program Sequence to Read Trackball</a>
</li></ul></li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#PROGRAMMABLESOUNDGENERATORPSG">PROGRAMMABLE SOUND GENERATOR (PSG)</a>
<ul><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#TONEGENERATORFREQUENCY">TONE GENERATOR FREQUENCY</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#NOISEGENERATORCONTROL">NOISE GENERATOR CONTROL</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#ATTENUATORS">ATTENUATORS</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#EXAMPLE">EXAMPLE</a>
</li></ul></li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#AppendixAVDPRegisters">Appendix A - VDP Registers</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#APPENDIXBINPUTOUTPUTSYSTEM">APPENDIX B - INPUT/OUTPUT SYSTEM</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#AppendixC">Appendix C</a>
</li><li><a href="http://www.smspower.org/Development/SMSOfficalDocs#AppendixD">Appendix D</a>
</li></ul></div></div>
<div class="vspace"></div><h2><a name="TheSegaMarkIIIGameConsole" id="TheSegaMarkIIIGameConsole"></a> The Sega Mark III Game Console</h2>
<p>This manual describes the SEGA Mark III game console hardware.
The manual is divided into five sections:
</p>
<p class="vspace">The CPU.
</p>
<p class="vspace">The Video Display Processor (VDP).
</p>
<p class="vspace">The Memory Management System.
</p>
<p class="vspace">The Input/Output System.
</p>
<p class="vspace">The Programmable Sound Generator (PSG).
</p>
<p class="vspace">Each section begins with a general description, followed by a
detailed description of every control bit. Several pictorial
diagrams at the back of the manual tie together all of the
concepts described in the manual. If you wish to see how a
particular feature fits into the total system, refer to these
back pages
</p>
<div class="vspace"></div><h3><a name="HEADINGS" id="HEADINGS"></a> HEADINGS</h3>
<p class="vspace">Important topics inside each section is marked as above with a
"heading". This allows quick scanning for specific items of
interest.
</p>
<div class="vspace"></div><h3><a name="FORWARDREFERENCES" id="FORWARDREFERENCES"></a> FORWARD REFERENCES</h3>
<p class="vspace">In some sections it is impossible to describe the system without
making references to technical details described further forward
in the manual. For example you will find reference to "Sprite
Interrupts" in the CPU section, before the notion of a sprite is
discussed in the VDP section.
</p>
<p class="vspace">For this reason you might find it helpful to browse the first
parts of each section to get a feel for the total system before
diving into the detailed descriptions.
</p>
<p class="vspace">The system will hereafter be referred to as the "Mk3".
</p>
<div class="vspace"></div><h2><a name="THECPU" id="THECPU"></a> THE CPU</h2>
<p class="vspace">The Mk3 uses a Z80A microprocessor, clocked at 3.58 MHz.
</p>
<p class="vspace">The implementation of Z80 features as they pertain to the Mk3
are described in this section.
</p>
<div class="vspace"></div><h3><a name="RESET" id="RESET"></a> RESET</h3>
<p class="vspace">The Z80A executes a RESET cycle when the base unit is turned on.
This is the only Z80A reset mechanism implemented.
</p>
<p class="vspace">The momentary RESET button on the console does not control Z80A
reset; it is attached to an input port for software polling.
</p>
<div class="vspace"></div><h3><a name="INTERRUPTSYSTEM" id="INTERRUPTSYSTEM"></a> INTERRUPT SYSTEM</h3>
<p class="vspace">The Mk3 implements two of the Z80 interrupts, the Non-maskable
Interrupt (NMI), and the Maskable Interrupt (INT).
</p>
<div class="vspace"></div><h3><a name="NMI" id="NMI"></a> NMI</h3>
<p class="vspace">The NMI pin is connected to the console "PAUSE" button. Pressing
this button causes the Z80 to exexute a Restart instruction at
location $66. This acts as a simple subroutine call: the PC is
pushed onto the stack and a jump to $0066 is performed.
</p>
<p class="vspace">This interrupt is "edge-triggered", which means that if the
PAUSE button is held down, you will get a single interrupt only.
</p>
<p class="vspace">NOTE: The last instruction of your NMI routine must be "RETN",
Return from Non-Maskable Interrupt.
</p>
<p class="vspace">The PAUSE button is for the exclusive use of your program; you
must set up the transfer of control at $0066 to your PAUSE
routine.
</p>
<p class="vspace">The most common PAUSE routine will toggle a software "pause"
flag and turn off the sounds if this flag has just been set.
The INT routine, which is periodically activated, then checks
the condition of the pause flag and does no processing if it is
set (it loops on the pause flag).
</p>
<p class="vspace">This method allows the pause feature to be implemented without
turning the interrupts off and on (with a DI and later an EI
instruction). This DI-EI combination can cause a spurious
interrupt in the Z80.
</p>
<p class="vspace">The NMI cannot be inhibited.
</p>
<div class="vspace"></div><h3><a name="INT" id="INT"></a> INT</h3>
<p class="vspace">This interrupt is enabled with an "EI" instruction, and disabled
with a "DI" instruction.
</p>
<p class="vspace">The Mk3 hardware supports the "mode 1" interrupt only. The boot
ROM executes the "IM 1" instruction at power-on.
</p>
<p class="vspace">In mode 1, activating the Z80A INT pin causes a Restart
instruction to be executed at location $38 if interrupts are
enabled.
</p>
<p class="vspace">This interrupt can be activated by two events in the VDP chip:
</p>
<p class="vspace">1. Vertical Blanking Interval.
</p>
<p class="vspace">2. Horizontal Line Counter.
</p>
<p class="vspace">Here is a skeleton program for an Interrupt response routine:
</p>
<p class="vspace">(at $0038)
</p>
<div class="sourceblock " id="sourceblock1">
  <div class="sourceblocktext"><div class="z80" style="font-family:monospace;">&nbsp;<span class="kw1">JP</span> INT<br>
&nbsp;.<br>
&nbsp;.<br>
INT <span class="kw1">PUSH</span> <span class="kw2">AF</span><br>
&nbsp;<span class="kw1">IN</span> <span class="kw2">A</span>,<span class="br0">(</span><span class="re0"><span class="re1">0B</span>FH</span><span class="br0">)</span><br>
&nbsp;.<br>
&nbsp;.<br>
&nbsp;.<br>
&nbsp;<span class="kw1">POP</span> <span class="kw2">AF</span><br>
&nbsp;<span class="kw1">EI</span><br>
&nbsp;<span class="kw1">RET</span></div></div>
  <div class="sourceblocklink"><a href="http://www.smspower.org/Development/SMSOfficalDocs?action=sourceblock&amp;num=1" type="text/plain">Get Code</a></div>
</div>

<p class="vspace">The first step is to save the working registers and flags. Other
"PUSH" instructions should be added for any registers your
interrupt routine will use.
</p>
<p class="vspace">Reading the I/O part at $BF does two things. First, it clears
the interrupt request line from the VDP chip. Second, it
provides VDP information as follows:
</p>
<p class="vspace">bit 7 — 1: VBLANK Interrupt, 0: H-Line Interrupt [if enabled].
</p>
<p class="vspace">bit 6 — 1: 9 sprites on a raster line.
</p>
<p class="vspace">bit 5 — 1: Sprite Collision.
</p>
<p class="vspace">bits 4-0 (no significance).
</p>
<p class="vspace">The VDP VBLANK and H-Line interrupts are enabled with the IE and
IE1 bits in VDP registers 0 and 1, as shown in the following
chart:
</p>
<div class="vspace"></div><h4><a name="InterruptEnableBits" id="InterruptEnableBits"></a> Interrupt Enable Bits</h4>
<table border="1"><tbody><tr><th align="center">IE (R1 bit 5)</th><th align="center">IE1 (R0 bit 4)</th><th align="center">Interrupt Source</th></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">H-Line Interrupt only.</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">Both H-Line and VBLANK.</td></tr>
</tbody></table>
<p class="vspace">When an INT is accepted, the interrupt system is turned off,
exactly as if a "DI" instruction had been executed. Thus, the
code to exit from an interrupt routine should restore the
registers, execute an "EI" instruction, and return.
</p>
<div class="vspace"></div><div><img src="./SMS Offical Docs - Development - SMS Power!_files/SMSOfficialScreenMap.png" alt="" title=""></div>
<div class="vspace"></div><h2><a name="THEVIDEODISPLAYPROCESSORVDP" id="THEVIDEODISPLAYPROCESSORVDP"></a> THE VIDEO DISPLAY PROCESSOR (VDP)</h2>
<p>The Mk3 uses an advanced video controller chip called the VDP
(Video Display Processor). The VDP is a Sega designed custom
chip whose architecture resembles an enhanced TMS9918A.
</p>
<p class="vspace">The screen resolution of the VDP is 256 pixels horizontal, and
192 pixels vertical. A pixel can be shown as one of sixteen
colors, selected from a palette of 64 different colors.
</p>
<p class="vspace">16 Kilobytes of RAM are dedicated to the video system. This RAM
(called the video RAM) is attached directly to the VDP chip, and
does not appear in the Z80 memory space. The Z80 reads and
writes the Video RAM through VDP registers.
</p>
<p class="vspace">The VDP implements two independent graphic systems, a background
system and a sprite system.
</p>
<div class="vspace"></div><h3><a name="VIDEORAMORGANIZATION" id="VIDEORAMORGANIZATION"></a> VIDEO RAM ORGANIZATION</h3>
<p class="vspace">The 16 Kilobyte Video RAM is divided into three sections:
</p>
<p class="vspace">1. A 1792 byte screen map. This map determines the placement
of character cells (sometimes known as "tiles") on the
background screen's 32 by 24 grid.
</p>
<p class="vspace">2. A 256 byte sprite attribute table. This table sets the X-Y
coordinates and character number of up to 64 moveable objects, or
sprites.
</p>
<p class="vspace">3. A 14,336 byte character generator. These are 8 by 8 pixel
character patterns for the background, and/or 8(h) by 8(v) or
8(h) by 16(v) pixel character patterns for the sprites.
</p>
<p class="vspace">32 bytes define a single 8 by 8 pixel character. The character
generator portion of the Video RAM thus is capable of defining
up to 448 characters.
</p>
<p class="vspace">The placement of the three Video RAM sections is controlled by
registers in the VDP. As we'll see, you have some choice over
where they appear in the 16K Video RAM memory map.
</p>
<div class="vspace"></div><h3><a name="COLOR" id="COLOR"></a> COLOR</h3>
<p class="vspace">The attribute of color is carried in the character patterns in
the character generator portion of the Video RAM. Each pixel in
the character pattern contains 4 bits of information. A choice
of sixteen colors is thus available for every pixel.
</p>
<p class="vspace">The sixteen available colors are not fixed. they are stored in
a Color RAM inside the VDP chip. The Color RAM is organizeed as
32 6-bit values. The six bits provide four levels (2 bits) of
red, green, and blue.
</p>
<p class="vspace">Note that 32 color values represent twice the addressing
capability of the 4-bit pixels. Other VDP control bits allow
selection of the 16 value color table from either the first half
or the second half of the Color RAM.
</p>
<div class="vspace"></div><div><img src="./SMS Offical Docs - Development - SMS Power!_files/SMSOfficialBackgroundSystem.png" alt="" title=""></div>
<div class="vspace"></div><h3><a name="BACKGROUNDSYSTEM" id="BACKGROUNDSYSTEM"></a> BACKGROUND SYSTEM</h3>
<p class="vspace">The background system is composed of "characters" which are
eight pixels high and eight pixels wide. The screen is
organized as 768 visible characters: 32 horizontal by 24
vertical.
</p>
<p class="vspace">An additional 4 character rows exist below the 24 visible
vertical rows. These additional rows are useful for scrolling
new background information upwards onto the screen.
</p>
<p class="vspace">2048 bytes of the video RAM function as the screen map. This map
defines the screen positions of 896 characters (768 visible).
</p>
<p class="vspace">At every character position, there is a 16-bit (2 byte) word
which describes the following:
</p>
<div class="vspace"></div><ol><li>Which of 512 characters to display at the character position (9 bits).
</li><li>Whether or not to flip the character horizontally or vertically (2 bits).
</li><li>Which of two sets of 16 colors to use for the character (1 bit).
</li><li>Whether sprites obscure the background, or vice versa (1 bit).
</li><li>Three uncommitted bits, useful for software flags (3 bits).
</li></ol><p class="vspace">The visible screen map occupies 1536 bytes of video RAM (768
characters, two bytes per character).
</p>
<p class="vspace">The nonvisible four rows of characters below the visible screen
occupy 256 bytes (128 characters, two bytes per character).
</p>
<p class="vspace">This leaves 256 bytes of unused memory at the highest address
of the 2048 byte screen map RAM. These 256 bytes are normally
used to store the Sprite Attribute Table.
</p>
<p class="vspace">This memory could also be used to store eight character
patterns, if the Sprite Attribute Table is located elsewhere.
If the screen map is placed at $3800 (the usual case), the
character numbers for the unused 256 bytes of screen map RAM are
$1F0 through $1F7.
</p>
<div class="vspace"></div><h3><a name="SCROLLINHIBITBITS" id="SCROLLINHIBITBITS"></a> SCROLL INHIBIT BITS</h3>
<p class="vspace">The background screen can be scrolled in one pixel increments
both horizontally and vertically. Two "scroll inhibit" bits
allow you to inhibit scrolling in two screen areas:
</p>
<p class="vspace">If HSI (Horiz Scroll Inhibit) is set to 1, the 2 character high
horizontal strip at the top of the screen does not scroll.
</p>
<p class="vspace">If VSI (Vert. Scroll Inhibit) is set to 1, the vertical band of
8 characters at the right edge of the screen does not scroll.
</p>
<p class="vspace">This feature simplifies the placement of score information at
the top or right side of the screen. When the background screen
playfield scrolls, the scores remain in place if the scroll
inhibit bits have been set.
</p>
<div class="vspace"></div><h3><a name="SPRITES" id="SPRITES"></a> SPRITES</h3>
<p class="vspace">A sprite is an easily movable object. The VDP provides 64
independent sprites. A control bit controls the size of all
sprites: 0 for an 8H by 8V spite, 1 for an 8H by 16V sprite.
</p>
<p class="vspace">Each sprite uses a three byte entry in a Sprite Attribute Table
(in Video RAM) to set it's vertical and Horizontal position, and
to select one of 256 characters to be displayed for the sprite.
</p>
<p class="vspace">A VDP control bit (Sprite Shift, bit 3 of R0) shifts all sprites
8 pixels to the left. This allows sprites to smoothly scroll
off the left edge of the screen.
</p>
<div class="vspace"></div><div><img src="./SMS Offical Docs - Development - SMS Power!_files/SMSOfficialSpriteSystem.png" alt="" title=""></div>
<p class="vspace">Sprite and background characters are drawn from the same "pool"
of character patterns in video RAM. Thus sprites have the same
color capabilities as background characters: 16 colors at a time
from a choice of 64 colors.
</p>
<p class="vspace">Sprite colors are always taken from the second group of 16
colors in the color RAM.
</p>
<p class="vspace">Sprites do not scroll when the background scene is scrolled.
</p>
<p class="vspace">Sprites can be placed over or under other sprites. Sprites can
also appear over or under characters in the background scene.
</p>
<p class="vspace">Up to eight sprites can occupy a single horizontal raster line.
A VDP status register bit is provided to alert you when nine or
more sprites are positioned on the same line. A horizontal
raster line containing nine or more sprites is not displayed
properly.
</p>
<p class="vspace">Another VDP status register bit indicates that two sprite
patterns touched (collided).
</p>
<div class="vspace"></div><h3><a name="SPRITEATTRIBUTETABLE" id="SPRITEATTRIBUTETABLE"></a> SPRITE ATTRIBUTE TABLE</h3>
<p class="vspace">A 256 byte section of Video RAM functions as the Sprite
Attribute Table. VDP register R5 is usually set to $FF to
position the Sprite Attribute Table at $3F00, the last 256 bytes
of Video RAM.
</p>
<p class="vspace">The Sprite Attribute Table is organized as shown on the table on
the next page.
</p>
<div class="vspace"></div><h4><a name="SpriteAttributeTableOrganization" id="SpriteAttributeTableOrganization"></a> Sprite Attribute Table Organization</h4>
<table border="1"><tbody><tr><th align="left">Address</th><th align="left">Attribute</th></tr>
<tr><td align="left">3F00</td><td align="left">vpos #0</td></tr>
<tr><td align="left">3F01</td><td align="left">vpos #1</td></tr>
<tr><td align="left">3F02</td><td align="left">vpos #2</td></tr>
<tr><td align="left">3F03</td><td align="left">vpos #3</td></tr>
<tr><td align="left">3F04</td><td align="left">vpos #4</td></tr>
<tr><td align="left">3F05</td><td align="left">vpos #5</td></tr>
<tr><td align="left">3F06</td><td align="left">vpos #6</td></tr>
<tr><td align="left">3F07</td><td align="left">$D0 (terminator)</td></tr>
<tr><td align="center" colspan="2">...</td></tr>
<tr><td align="left">3F3E</td><td>&nbsp;</td></tr>
<tr><td align="left">3F3F</td><td align="left">vpos #63</td></tr>
<tr><td colspan="2">&nbsp;</td></tr>
<tr><td align="left">3F40..3F7F</td><td align="left">64 unused bytes. [Can put two 32 byte character patterns here and address as char's $1FA and $1FB].</td></tr>
<tr><td colspan="2">&nbsp;</td></tr>
<tr><td align="left">3F80</td><td align="left">hpos #0</td></tr>
<tr><td align="left">3F81</td><td align="left">char code #0</td></tr>
<tr><td align="left">3F82</td><td align="left">hpos #1</td></tr>
<tr><td align="left">3F83</td><td align="left">char code #1</td></tr>
<tr><td align="left">3F84</td><td align="left">hpos #2</td></tr>
<tr><td align="left">3F85</td><td align="left">char code #2</td></tr>
<tr><td align="left">3F86</td><td>&nbsp;</td></tr>
<tr><td align="left">3F87</td><td>&nbsp;</td></tr>
<tr><td align="center" colspan="2">...</td></tr>
<tr><td align="left">3FFE</td><td align="left">hpos #63</td></tr>
<tr><td align="left">3FFF</td><td align="left">char code #63</td></tr>
</tbody></table>
<p class="vspace">The special code $D0 is placed as a vertical position code to
tell the sprite hardware to stop searching the list for sprites.
All sprites which occur after the $D0 entry are disabled.
</p>
<p class="vspace">When two sprites overlap, the higher numbered sprite will be
displayed on top. The overlap priority is thus set by the
positions of the sprites in the table.
</p>
<p class="vspace">The horizontal position bytes locate the upper left corner of
the sprite at one of 255 horizontal coordinates on the screen.
An hpos=0 puts the sprite on the left column of the screen (left
8 pixels). An hpos=255 puts the sprite at the last pixel
column; only the left column pixels of the sprite are seen and
the other 7 columns in the sprite pattern are blanked.
</p>
<p class="vspace">This makes it easy to smoothly scroll a sprite off the <em>right</em>
edge of the screen.
</p>
<p class="vspace">Setting a VDP Sprite Shift bit (R0, bit 3) shifts all sprite
patterns eight pixels to the left. This allows sprites to be
smoothly scrolled off the <em>left</em> edge of the screen.
</p>
<p class="vspace">If smooth appearing and disappearing of sprites is desired on
<em>both</em> edges of the screen, another VDP control bit (R0, bit 5)
can be set to 1 to blank the left column of characters.
</p>
<p class="vspace">Thus if R0 bit 3 is set to 0 (no shift left), and R0 bit 5 is
set to 1 (blank left column), the screen is reduced to 31
character columns, and sprites enter and leave the screen
smoothly. The left edge is handled by the fact that sprite
hpos=0 puts the sprite in the left column, which is blanked in
this mode.
</p>
<div class="vspace"></div><h3><a name="SPRITEBACKGROUNDDISPLAYPRIORITY" id="SPRITEBACKGROUNDDISPLAYPRIORITY"></a> SPRITE/BACKGROUND DISPLAY PRIORITY</h3>
<p class="vspace">Sprites can appear in front of or behind the background scene.
This is controlled by bit 12 of the 16-bit background character
code. If this bit is set to 0, all sprites appear over the
background. If this bit is set to 1, background colors #1-15
appear over the sprites. Background color #0 always appears
under the sprites.
</p>
<div class="vspace"></div><h3><a name="COLORRAM" id="COLORRAM"></a> COLOR RAM</h3>
<p class="vspace">The VDP chip contains a color RAM of 32 6-bit values. These
values are formatted as "write only" 8-bit bytes:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><td align="center">X</td><td align="center">X</td><td align="center">B1</td><td align="center">B0</td><td align="center">G1</td><td align="center">G0</td><td align="center">R1</td><td align="center">R0</td></tr>
</tbody></table>
<p class="vspace">where R1:R0, G1:G0 and B1:B0 define four intensities for red,
green, and blue as follows:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">R,G,B-1</th><th align="center">R,G,B-0</th><th align="center">Intensity</th></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">Off</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">1/3</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">2/3</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">3/3 (brightest)</td></tr>
</tbody></table>
<p class="vspace">The color RAM is organized as two banks of 16 colors each.
Colors are selected from either bank with a four bit color code.
</p>
<div class="vspace"></div><h3><a name="CHARACTERPATTERNS" id="CHARACTERPATTERNS"></a> CHARACTER PATTERNS</h3>
<p class="vspace">The actual dot patterns for screen images are called characters.
Character patterns are used by both the background system and
the sprites.
</p>
<p class="vspace">Every character is made up of 32 bytes. These bytes are
orgaized as eight 4 byte groups, where each 4 byte group forms
one row of pixels.
</p>
<p class="vspace">Four bits are required to select 16 colors. These bits come
from corresponding bits in the four planes. The table on the
next page shows a 32 byte character patern. "0's" are shown as
periods for clarity.
</p>
<div class="vspace"></div><h3><a name="ANEXAMPLECHARACTERPATTERN" id="ANEXAMPLECHARACTERPATTERN"></a> AN EXAMPLE CHARACTER PATTERN</h3>
<table border="1"><tbody><tr><th valign="top">Byte
</th><th valign="top">b7
</th><th valign="top">b6
</th><th valign="top">b5
</th><th valign="top">b4
</th><th valign="top">b3
</th><th valign="top">b2
</th><th valign="top">b1
</th><th valign="top">b0
</th><td colspan="2" valign="top">
</td></tr><tr><td valign="top"> 0
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><th valign="top"> c0
</th><td rowspan="4" valign="top">FIRST PIXEL ROW<br>'0101' = color #5
</td></tr><tr><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 2
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 3
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c3
</th></tr><tr><td colspan="11" valign="top">
</td></tr><tr><td valign="top"> 4
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c0
</th><td rowspan="4" valign="top"> SECOND PIXEL ROW:<br>'1100' = color #12,<br>'0000' = color #0.
</td></tr><tr><td valign="top"> 5
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 6
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 7
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c3
</th></tr><tr><td colspan="11" valign="top">
</td></tr><tr><td valign="top"> 8
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c0
</th><td rowspan="4" valign="top"> THIRD PIXEL ROW
</td></tr><tr><td valign="top"> 9
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 10
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 11
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c3
</th></tr><tr><td colspan="11" valign="top">
</td></tr><tr><td valign="top"> 12
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c0
</th><td rowspan="4" valign="top"> FOURTH PIXEL ROW
</td></tr><tr><td valign="top"> 13
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 14
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 15
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c3
</th></tr><tr><td colspan="11" valign="top">
</td></tr><tr><td valign="top"> 16
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c0
</th><td rowspan="4" valign="top"> FIFTH PIXEL ROW
</td></tr><tr><td valign="top"> 17
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 18
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 19
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c3
</th></tr><tr><td colspan="11" valign="top">
</td></tr><tr><td valign="top"> 20
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c0
</th><td rowspan="4" valign="top"> SIXTH PIXEL ROW
</td></tr><tr><td valign="top"> 21
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 22
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 23
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c3
</th></tr><tr><td colspan="11" valign="top">
</td></tr><tr><td valign="top"> 24
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c0
</th><td rowspan="4" valign="top"> SEVENTH PIXEL ROW
</td></tr><tr><td valign="top"> 25
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 26
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 27
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c3
</th></tr><tr><td colspan="11" valign="top">
</td></tr><tr><td valign="top"> 28
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c0
</th><td rowspan="4" valign="top"> EIGHTH PIXEL ROW<br>'0010' = color #2
</td></tr><tr><td valign="top"> 29
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><td valign="top"> 1
</td><th valign="top"> c1
</th></tr><tr><td valign="top"> 30
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top"> c2
</th></tr><tr><td valign="top"> 31
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><td valign="top"> .
</td><th valign="top">c3
</th></tr></tbody></table>
<p class="vspace">This pattern represents a multicolor letter "C".
</p>
<p class="vspace">The top section is color #5 (reading corresponding bits from MSB
to LSB, 0101).
</p>
<p class="vspace">The vertical section is color #12 (1100).
</p>
<p class="vspace">The bottom section is color #2 (0010).
</p>
<p class="vspace">Which colors these represent depends on the values stored in
color RAM locations 2, 5 and 12.
</p>
<p class="vspace">NOTE: the 8 by 8 character background color is #0 (0000).
</p>
<div class="vspace"></div><h3><a name="VDPREGISTERS" id="VDPREGISTERS"></a> VDP REGISTERS</h3>
<p class="vspace">The VDP is controlled by eleven internal 8-bit registers. This
section describes the method by which the Z80A acesses these
registers, and then discusses the function of the individual
registers.
</p>
<p class="vspace">The Z80 "sees" the VDP chip through two I/O port locations, $BE
and $BF. I/O location $BF is the COMMAND register for a write,
and the STATUS register for a read.
</p>
<p class="vspace">I/O port $BE is the read/write DATA register.
</p>
<p class="vspace">The Command Register is written twice in succession for all
command operations; the data register may be read or written any
number of times in succession, depending on the operation.
</p>
<p class="vspace">Because the command register is sequence sensitive, requiring a
<em>pair</em> of outout bytes per operation, a DI instrucion should
precede command register updates. This prevents, for example, an
interrupt service routine that reads the VDP status register
from disrupting the two byte synchronization.
</p>
<p class="vspace"><em>There is a timing constraint for accessing the VDP chip.</em>
</p>
<p class="vspace">The VDP chip cannot process data any faster than the following
rates:
</p>
<div class="vspace"></div><ul><li>16 Z80A T-States during VBLANK
</li><li>29 Z80A T-States during active video.
</li></ul><p class="vspace">This means that you should never issue two consecutive OUT or IN
instructions to the VDP; they should be separated by at least a
NOP instruction.
</p>
<p class="vspace">This constraint applies to Video RAM and Color RAM as well as
the internal registers.
</p>
<p class="vspace">A two bit mode field in bits 7 and 6 of the second COMMAND byte
determines one of four operations:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">b7</th><th align="center">b6</th><th align="left">Operation</th></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">Read 16 Kbyte VDP RAM</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">Write 16 Kbyte VDP RAM</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">Write VDP Register</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">Write Color RAM</td></tr>
</tbody></table>
<p class="vspace">To set up for the first two operations, read/write Video RAM
the two COMMAND bytes have the following format:
</p>
<div class="vspace"></div><h4><a name="ReadVDPRAM" id="ReadVDPRAM"></a> Read VDP RAM</h4>
<table border="1"><tbody><tr><th align="left">First byte written to $BF</th><td align="center">A7</td><td align="center">A6</td><td align="center">A5</td><td align="center">A4</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
<tr><th align="left">Second byte writen to $BF</th><td align="center">0</td><td align="center">0</td><td align="center">A13</td><td align="center">A12</td><td align="center">A11</td><td align="center">A10</td><td align="center">A9</td><td align="center">A8</td></tr>
</tbody></table>
<div class="vspace"></div><h4><a name="WriteVDPRAM" id="WriteVDPRAM"></a> Write VDP RAM</h4>
<table border="1"><tbody><tr><th align="left">First byte written to $BF</th><td align="center">A7</td><td align="center">A6</td><td align="center">A5</td><td align="center">A4</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
<tr><th align="left">Second byte writen to $BF</th><td align="center">0</td><td align="center">1</td><td align="center">A13</td><td align="center">A12</td><td align="center">A11</td><td align="center">A10</td><td align="center">A9</td><td align="center">A8</td></tr>
</tbody></table>
<p class="vspace">After the COMMAND bytes have been output, data can be read at
Input Port $BE or written at Output Port $BE.
</p>
<p class="vspace">The VDP has an address auto-increment feature. Once the Video
RAM starting address has been loaded, the data (I/O port $BE)
may be repeatedly accessed, and the address will automatically
increase by one byte for every access.
</p>
<p class="vspace">NOTE: The autoincrement feature works only with all reads or all
writes. Changing from read to write or vice versa requires two
writes to the command register to reselect the mode.
</p>
<p class="vspace">The COMMAND register format for writing a VDP register (they are
write-only) is shown below:
</p>
<div class="vspace"></div><h4><a name="WriteVDPRegister" id="WriteVDPRegister"></a> Write VDP Register</h4>
<table border="1"><tbody><tr><th align="left">First byte written to $BF</th><td align="center">A7</td><td align="center">A6</td><td align="center">A5</td><td align="center">A4</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
<tr><th align="left">Second byte writen to $BF</th><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">r3</td><td align="center">r2</td><td align="center">r1</td><td align="center">r0</td></tr>
</tbody></table>
<p class="vspace">The register number is r3-r0, and ranges from 0 through 10 ($00
through $0A). The data to be written to the register is d7-d0.
</p>
<p class="vspace">For the "write register" operation only, there is no write to
the DATA register at $BE, since the data (d7-d0) is contained in
the first byte of the COMMAND byte pair.
</p>
<p class="vspace">The final command mode allows writing color values to the
write-only VDP Color RAM.
</p>
<div class="vspace"></div><h4><a name="WriteVDPColorRAM" id="WriteVDPColorRAM"></a> Write VDP Color RAM</h4>
<table border="1"><tbody><tr><td align="left">First byte written to $BF</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">A4</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
<tr><td align="left">Second byte writen to $BF</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td></tr>
</tbody></table>
<p class="vspace">After loading this pair of bytes to the COMMAND register, the
color RAM data is written to Output Port $BE in the following
format:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="left">Color RAM Data written to $BE</th><td align="center">0</td><td align="center">0</td><td align="center">b1</td><td align="center">b0</td><td align="center">g1</td><td align="center">g0</td><td align="center">r1</td><td align="center">r0</td></tr>
</tbody></table>
<p class="vspace">Where b1-b0 set four intensities for blue, g1-g0 set four
intensities for green, and r1-r0 set four intensities for red.
</p>
<p class="vspace">As with the Video RAM, repeated writes to Output Port $BE
automatically increment the Color RAM address. Color RAM
addresses are mapped as shown on the next page.
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">Color RAM Address</th><th align="center">Color Number</th></tr>
<tr><td align="center">00000 ($00)</td><td align="center">Bank1, Color 0</td></tr>
<tr><td align="center">00001 ($01)</td><td align="center">Bank1, Color 1</td></tr>
<tr><td align="center">00010 ($02)</td><td align="center">Bank1, Color 2</td></tr>
<tr><td align="center">00011 ($03)</td><td align="center">Bank1, Color 3</td></tr>
<tr><td align="center">00100 ($04)</td><td align="center">Bank1, Color 4</td></tr>
<tr><td align="center">00101 ($05)</td><td align="center">Bank1, Color 5</td></tr>
<tr><td align="center">00110 ($06)</td><td align="center">Bank1, Color 6</td></tr>
<tr><td align="center">00111 ($07)</td><td align="center">Bank1, Color 7</td></tr>
<tr><td align="center">01000 ($08)</td><td align="center">Bank1, Color 8</td></tr>
<tr><td align="center">01001 ($09)</td><td align="center">Bank1, Color 9</td></tr>
<tr><td align="center">01010 ($0A)</td><td align="center">Bank1, Color 10</td></tr>
<tr><td align="center">01011 ($0B)</td><td align="center">Bank1, Color 11</td></tr>
<tr><td align="center">01100 ($0C)</td><td align="center">Bank1, Color 12</td></tr>
<tr><td align="center">01101 ($0D)</td><td align="center">Bank1, Color 13</td></tr>
<tr><td align="center">01110 ($0E)</td><td align="center">Bank1, Color 14</td></tr>
<tr><td align="center">01111 ($0F)</td><td align="center">Bank1, Color 15</td></tr>
<tr><td colspan="2">&nbsp;</td></tr>
<tr><td align="center">10000 ($10)</td><td align="center">Bank2, Color 0</td></tr>
<tr><td align="center">10001 ($11)</td><td align="center">Bank2, Color 1</td></tr>
<tr><td align="center">10010 ($12)</td><td align="center">Bank2, Color 2</td></tr>
<tr><td align="center">10011 ($13)</td><td align="center">Bank2, Color 3</td></tr>
<tr><td align="center">10100 ($14)</td><td align="center">Bank2, Color 4</td></tr>
<tr><td align="center">10101 ($15)</td><td align="center">Bank2, Color 5</td></tr>
<tr><td align="center">10110 ($16)</td><td align="center">Bank2, Color 6</td></tr>
<tr><td align="center">10111 ($17)</td><td align="center">Bank2, Color 7</td></tr>
<tr><td align="center">11000 ($18)</td><td align="center">Bank2, Color 8</td></tr>
<tr><td align="center">11001 ($19)</td><td align="center">Bank2, Color 9</td></tr>
<tr><td align="center">11010 ($1A)</td><td align="center">Bank2, Color 10</td></tr>
<tr><td align="center">11011 ($1B)</td><td align="center">Bank2, Color 11</td></tr>
<tr><td align="center">11100 ($1C)</td><td align="center">Bank2, Color 12</td></tr>
<tr><td align="center">11101 ($1D)</td><td align="center">Bank2, Color 13</td></tr>
<tr><td align="center">11110 ($1E)</td><td align="center">Bank2, Color 14</td></tr>
<tr><td align="center">11111 ($1F)</td><td align="center">Bank2, Color 15</td></tr>
</tbody></table>
<p class="vspace">[Note: Background colors can be taken from either the first group of sixteen or the second group of sixteen colors. Border colors and sprite colors are taken from the second group of sixteen colors.]
</p>
<p class="vspace">The command register has one additional function. When it is
read with an IN ($BF) instruction, it functions as an interupt
status register, and also clears interrupt requests from the VDP
chip.
</p>
<div class="vspace"></div><h3><a name="VDPREGISTERUPDATES" id="VDPREGISTERUPDATES"></a> VDP REGISTER UPDATES</h3>
<p class="vspace">In general, all VDP updates should be done while the TV's video
signal is blanked. If operations that affect the screen
appearance are not done during screen blanking, the screen will
appear to have "noise" in the picture.
</p>
<p class="vspace">Your program can detect horizontal and vertical blanking
intervals using the interrupt system and VDP flag bits. This
capability is discussed in the CPU section.
</p>
<p class="vspace">It is not necessary to synchronize VDP initialization with
blanking intervals, since the screen can be blanked prior to the
setup operations, and then turned on when the initialization is complete.
</p>
<div class="vspace"></div><h3><a name="VDPREGISTERDESCRIPTION" id="VDPREGISTERDESCRIPTION"></a> VDP REGISTER DESCRIPTION</h3>
<h4><a name="Register0" id="Register0"></a> Register 0</h4>
<h4><a name="Register1" id="Register1"></a> Register 1</h4>
<p>R0 and R1 set the VDP display and interrupt mode.
</p>
<p class="vspace">R0:
</p>
<table border="1"><tbody><tr><th align="center">b7</th><td align="center">VSI</td><td align="left">Vertical Scroll Inhibit (right 8 char columns).<br>0: Scroll along with background.<br>1: Fixed (no scroll).</td></tr>
<tr><th align="center">b6</th><td align="center">HSI</td><td align="left">Horizontal Scroll Inhibit (top 2 char rows). <br>0: Scroll along with background.<br>1: Fixed (no scroll).</td></tr>
<tr><th align="center">b5</th><td align="center">LCB</td><td align="left">Left Column Blank.<br>0: Normal Display.<br>1: Blank left char column (border color).</td></tr>
<tr><th align="center">b4</th><td align="center">IE1</td><td>Interrupt Enable.</td></tr>
<tr><th align="center">b3</th><td align="center">SS</td><td align="left">Sprite Shift.<br>0: Normal sprite position.<br>1: Shift all sprites 8 pixels to the left.</td></tr>
<tr><th align="center">b2</th><td align="center">1</td><td align="left">[Always set this to 1].</td></tr>
<tr><th align="center">b1</th><td align="center">1</td><td align="left">[Always set this to 1].</td></tr>
<tr><th align="center">b0</th><td align="center">ES</td><td>External Sync.<br>[Always set this to 0].</td></tr>
</tbody></table>
<p class="vspace">R1:
</p>
<table border="1"><tbody><tr><th align="center">b7</th><td align="center">1</td><td align="left">[Always set this to 1].</td></tr>
<tr><th align="center">b6</th><td align="center">DIS</td><td align="left">Display ON.<br>0: Blank whole screen.<br>1: Normal video.</td></tr>
<tr><th align="center">b5</th><td align="center">IE</td><td align="left">Interrupt Enable.</td></tr>
<tr><th align="center">b4</th><td align="center">0</td><td align="left">[Always set this to 0].</td></tr>
<tr><th align="center">b3</th><td align="center">0</td><td align="left">[Always set this to 0].</td></tr>
<tr><th align="center">b2</th><td align="center">0</td><td align="left">[Always set this to 0].</td></tr>
<tr><th align="center">b1</th><td align="center">SZ</td><td align="left" colspan="2">Sprite Size.<br>0: All sprites are 8 by 8.<br>1: All sprites are 8 by 16.</td></tr>
<tr><th align="center">b0</th><td align="center">0</td><td align="left">[Always set this to 0].</td></tr>
</tbody></table>
<p class="vspace">The two bit interrupt control field is defined as follows:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">IE</th><th align="center">IE1</th><td align="left">Enabled Interrupt:</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="left">Raster Line.</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="left">VBLANK and Raster Line.</td></tr>
</tbody></table>
<div class="vspace"></div><h4><a name="Register2" id="Register2"></a> Register 2</h4>
<p>R2 sets the base address for the screen map. It positions the
2048 screen map to one of eight starting addresses, on 2048 byte
boundaries, according to the following table:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">R2 Value</th><th align="center">Screen Map Base Address</th></tr>
<tr><td align="center">$FF</td><td align="center">$3800 &lt;--- Normal Setting</td></tr>
<tr><td align="center">$FD</td><td align="center">$3000</td></tr>
<tr><td align="center">$FB</td><td align="center">$2800</td></tr>
<tr><td align="center">$F9</td><td align="center">$2000</td></tr>
<tr><td align="center">$F7</td><td align="center">$1800</td></tr>
<tr><td align="center">$F5</td><td align="center">$1000</td></tr>
<tr><td align="center">$F3</td><td align="center">$0800</td></tr>
<tr><td align="center">$F1</td><td align="center">$0000</td></tr>
</tbody></table>
<p class="vspace">The normal setting for R2 is $FF, which positions the base
address at $3800, the highest-addressed 2 KByte section of the
16 KByte Video RAM.
</p>
<div class="vspace"></div><h4><a name="Register3" id="Register3"></a> Register 3</h4>
<p>R3 should always be set to $FF.
</p>
<div class="vspace"></div><h4><a name="Register4" id="Register4"></a> Register 4</h4>
<p>R4 should always be set to $FF.
</p>
<div class="vspace"></div><h4><a name="Register5" id="Register5"></a> Register 5</h4>
<p>R5 controls the base address for the Sprite Attribute Table.
This 256 byte table can be positioned at one of 64 starting
addresses in Video RAM.
</p>
<p class="vspace">The base address is formatted in R5 as follows:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">R5:</th><td align="center">1</td><td align="center">A13</td><td align="center">A12</td><td align="center">A11</td><td align="center">A10</td><td align="center">A9</td><td align="center">A8</td><td align="center">1</td></tr>
</tbody></table>
<p class="vspace">The normal setting for R5 is $FF, which positions the Sprite
Attribute Table at $3F00. When R2 is $FF, placing the screen
map at $3800, and R5 is $FF, the unused top 256 bytes of screen
map memory is occupied by the 256 byte Sprite Attribute Table.
</p>
<div class="vspace"></div><h4><a name="Register6" id="Register6"></a> Register 6</h4>
<p>R6 sets the base address for the sprite patterns. Only two
values are valid for R6:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">R6 Value</th><th align="left">Sprite Patterns</th></tr>
<tr><td align="center">$FB</td><td align="left">First 8K of Video RAM &lt;--- Normal Value</td></tr>
<tr><td align="center">$FF</td><td align="left">Second 8K of Video RAM</td></tr>
</tbody></table>
<p class="vspace">The preferred location for the sprite patterns is in the first
8K of video RAM, since the full 8192 bytes are available for
patterns. In the second 8K, 2048 bytes are lost to the screen
map and Sprite Attribute Table. Thus 256 sprite patterns can be
stored in the first 8K, but only 192 sprite patterns can be
stored in the second 8K.
</p>
<div class="vspace"></div><h4><a name="Register7" id="Register7"></a> Register 7</h4>
<p>R7 sets the border color. The border color is taken from the
<em>second</em> bank of colors in VDP Color RAM.
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">R7:</th><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">C3</td><td align="center">C2</td><td align="center">C1</td><td align="center">C0</td></tr>
</tbody></table>
<div class="vspace"></div><h4><a name="Register8" id="Register8"></a> Register 8</h4>
<p>R8 sets the horizontal scroll value for the background scene. A
value of $00 produces no scrolling. A value of $01 moves the
background scene one pixel to the left, and moves the leftmost
column of pixels to the rightmost column (the scrolling "wraps
around").
</p>
<p class="vspace">Higher value of R8 "rotate" the screen horizontally to a
maximum of 255 pixels for a value of $FF. Note that horizontal
scrolling resembles a rotating vertical cylinder, with graphic
information disappearing from the left side of the screen and
reappearing on the right side of the screen.
</p>
<div class="vspace"></div><h4><a name="Register9" id="Register9"></a> Register 9</h4>
<p>R9 sets the vertical scroll value for the background scene. A
value of $00 produces no scrolling. A value of $01 moves the
background scene one pixel upward. The vertical scrolling
resembles a rotating horizontal cylinder, but the "wrap around"
point is not at the screen edge, as with horizontal acrolling.
Rather, it is at the 28th character row. (Remember that the
screen is organized as 28 character rows, with the top 24
displayed on the screen).
</p>
<p class="vspace">Register 9 is latched in vertical blanking.
</p>
<div class="vspace"></div><h4><a name="Register10" id="Register10"></a> Register 10</h4>
<p>R10 controls the Raster Line Interrupt.
</p>
<p class="vspace">The TV beam sweeps out horizontal lines (called raster lines)
from left to right, moving from the top to the bottom of the
screen. The visible picture contains 192 of these raster
lines.
</p>
<p class="vspace">At the end of each raster line there is a brief blanking
interval (HBLANK) in which the TV beam is turned off as the beam
retraces from the right side to the left side of the screen.
This HBLANK interval last approximately 10 microseconds.
</p>
<p class="vspace">It is desireable to receive an interrupt just after a selected
raster line has been displayed. For example, you might want to
change a color value after the beam has swept out the top half of
the screen. In this case you would want to know when the 95th
raster line has completed.
</p>
<p class="vspace">R10 allows you to do this. If you load R10 with 94, a Raster
Line Interrupt Request will be generated every time the 95th
horizontal line finishes it's scan.
</p>
<p class="vspace">The value loaded into R10 should be one less than the raster
line you wish to "trigger" the interrupt.
</p>
<p class="vspace">The Raster Line Interrupt continues to generate interrupt
requests as the beam sweeps the screen. The table on the next
page shows the settings of R10 and the raster lines that
generate interrupt requests at HBLANK time:
</p>
<div class="vspace"></div>
<div class="vspace"></div><table border="1"><tbody><tr><th align="center">R10 Value</th><th align="left">Interrupt Requests at these HBLANK times</th></tr>
<tr><td align="center">$C0-$FF</td><td align="left">None</td></tr>
<tr><td align="center">$00</td><td align="left">1,2,3,4,5,...191</td></tr>
<tr><td align="center">$01</td><td align="left">2,4,6,8,10,..190</td></tr>
<tr><td align="center">$02</td><td align="left">3,6,9,12,....189</td></tr>
<tr><td align="center">$03</td><td align="left">4,8,12,16,...188</td></tr>
<tr><td align="center">(etc)</td><td align="left">(etc)</td></tr>
</tbody></table>
<p class="vspace">There are two special cases: $FF turns off the interrupt
requests, and $00 gives a Raster Line interrupt request for
every horizontal line.
</p>
<p class="vspace">There is a one interrupt delay between loading R10 and having
the value take effect. For example, if you set R10 for line
20, and respond to the interrupt by resetting R10 to 150, the
very next Raster Line Interrupt will occur at 20, and all
subsequent ones will occur at 150.
</p>
<p class="vspace">The VDP registers are initialized at power on to the following
values:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">R0</th><td align="center">$36</td><td align="left">mode</td></tr>
<tr><th align="center">R1</th><td align="center">$A0</td><td align="left">mode</td></tr>
<tr><th align="center">R2</th><td align="center">$FF</td><td align="left">Screen Map Table Base</td></tr>
<tr><th align="center">R3</th><td align="center">$FF</td><td align="left">(Always $FF)</td></tr>
<tr><th align="center">R4</th><td align="center">$FF</td><td align="left">(Always $FF)</td></tr>
<tr><th align="center">R5</th><td align="center">$FF</td><td align="left">Sprite Table Base</td></tr>
<tr><th align="center">R6</th><td align="center">$FB</td><td align="left">Sprite Pattern Table Base</td></tr>
<tr><th align="center">R7</th><td align="center">$00</td><td align="left">Border color #0</td></tr>
<tr><th align="center">R8</th><td align="center">$00</td><td align="left">Scroll-H</td></tr>
<tr><th align="center">R9</th><td align="center">$00</td><td align="left">Scroll-V</td></tr>
<tr><th align="center">R10</th><td align="center">$FF</td><td align="left">H-line interrupt ($FF=OFF)</td></tr>
</tbody></table>
<div class="vspace"></div><h2><a name="MEMORYMANAGEMENT" id="MEMORYMANAGEMENT"></a> MEMORY MANAGEMENT</h2>
<p>The Mk3 base unit contains 8 kilobytes of ROM and 8 Kilobytes of
RAM. Game program ROM is plugged into the unit by using one of
two slots.
</p>
<p class="vspace">The front slot accepts a slim cartridge that resembles a credit
card. The present capacity of this card is 32 Kilobytes. A 128
Kilobyte card is in the works.
</p>
<p class="vspace">The top slot accepts a more conventional plastic-cased game
cartridge. 128 Kilobyte cartridges are now in production. 256
Kilobyte and larger cartridges are in the works.
</p>
<p class="vspace">The Z80A processor is capable of addressing 64 kilobytes of
memory. Because the added game cartridge memoy can exceed 64
Kilobytes, a simple memory management system is implemented in
the Mk3.
</p>
<p class="vspace">When the Mk3 is turned on, the memory map contains an 8
kilobyte ROM at $0000, and an 8 Kilobyte RAM at $C000.
</p>
<div class="vspace"></div><h3><a name="SYSTEMRAM" id="SYSTEMRAM"></a> SYSTEM RAM</h3>
<p class="vspace">The RAM is mapped into two places, $C000-$DFFF and $E000-$FFFF.
This RAM is used for Z80A stack and scratchpad use.
</p>
<p class="vspace">The top eight locations of RAM are reserved for memory
management control registers, and should not be used by a game
program.
</p>
<p class="vspace">For future compatibility, the RAM should be addressed at
$C000-$DFFF. The stack should be placed at $DFF8.
</p>
<div class="vspace"></div><h3><a name="MEMORYENABLES" id="MEMORYENABLES"></a> MEMORY ENABLES</h3>
<p class="vspace">Output port $3E controls the memory enables. Individual bits in
this port enable the System ROM, System RAM, Card Slot,
Cartridge Slot, and External Slot. (The external Slot is not
presently used).
</p>
<p class="vspace">Output port $3E has the following format:
</p>
<div class="vspace"></div><h4><a name="OUT3E" id="OUT3E"></a> OUT ($3E):</h4>
<table border="1"><tbody><tr><th valign="top">bit 0
</th><td valign="top">don't care
</td></tr><tr><th valign="top">bit 1
</th><td valign="top">don't care
</td></tr><tr><th rowspan="2" valign="top">bit 2
</th><td valign="top">0: enable joysticks
</td></tr><tr><td valign="top">1: disable joysticks
</td></tr><tr><th rowspan="2" valign="top">bit 3
</th><td valign="top">0: enable base unit 8K ROM
</td></tr><tr><td valign="top">1: disable base unit 8K ROM
</td></tr><tr><th rowspan="2" valign="top">bit 4
</th><td valign="top">0: enable internal 8K RAM
</td></tr><tr><td valign="top">1: disable internal 8K RAM
</td></tr><tr><th rowspan="2" valign="top">bit 5
</th><td valign="top">0: enable card ROM
</td></tr><tr><td valign="top">1: disable card ROM
</td></tr><tr><th rowspan="2" valign="top">bit 6
</th><td valign="top">0: enable cartridge ROM
</td></tr><tr><td valign="top">1: disable cartridge ROM
</td></tr><tr><th rowspan="2" valign="top">bit 7
</th><td valign="top">0: enable external port
</td></tr><tr><td valign="top">1: disable external port
</td></tr></tbody></table>
<div class="vspace"></div><h3><a name="MEMORYSELECTIONATPOWERON" id="MEMORYSELECTIONATPOWERON"></a> MEMORY SELECTION AT POWER-ON</h3>
<p class="vspace">When the system is turned on, the Z80A begins executing code at
location $0000 in the resident 8 Kilobyte ROM. This ROM code
performs the following steps:
</p>
<div class="vspace"></div><ol><li>The system is initialized.
<div class="vspace"></div></li><li>A small program is copied from ROM into the RAM (at $C700).
<div class="vspace"></div></li><li>The program jumps to $C700 to execute this prgram.
<div class="vspace"></div></li><li>All of the system ROM spaces are disabled. This is why the program is copied to RAM and run there--the ROM spaces can then be checked one by one.
<div class="vspace"></div></li><li>The ROM spaces are individually enabled and checked for the presence of memory. They are checked in the following order:
<div class="vspace"></div><ol><li>Front card slot.
</li><li>Top cartridge slot.
</li><li>External (rear) slot.
</li></ol><div class="vspace"></div></li><li>If memory is detected in any of these three slots, the slot is enabled and the Z80A executes a jump to location $0000.
<div class="vspace"></div></li><li>If no memory is detected, the console ROM is eneabled and an "Insert a cartridge" message is put on the screen.
</li></ol><p class="vspace">Notice that if both the card and cartridge are plugged in, the card will be enabled because it is checked first.
</p>
<p class="vspace">A game program is written as a completely self-contained Z80A application program with origin $0000. A game program must take care of all system "housekeeping", for example setting up the interrupt vectors.
</p>
<p class="vspace"><em>Once a game is running, there is no access to the boot ROM.</em>
</p>
<div class="vspace"></div><h3><a name="MEMORYMAPS" id="MEMORYMAPS"></a> MEMORY MAPS</h3>
<p>The following figures show memory maps for two presently
defined memory sizes: 32 Kilobytes, and 128 Kilobytes.
</p>
<div class="vspace"></div><div><img src="./SMS Offical Docs - Development - SMS Power!_files/SMSOfficialMemoryMap.png" alt="" title=""></div>
<p class="vspace">Figure M-1 shows the Z80A memory map at power-on.
</p>
<div class="vspace"></div><h3><a name="x32KILOBYTES" id="x32KILOBYTES"></a> 32 KILOBYTES</h3>
<p>Figure M-2 shows the Z80A memory map for the 32 Kilobyte card.
This is the simplest case: 32 Kilobytes starting at location
$0000.
</p>
<div class="vspace"></div><h3><a name="x128KILOBYTES" id="x128KILOBYTES"></a> 128 KILOBYTES</h3>
<p>Figure M-3 shows the memory map for a 128 Kilobyte cartridge.
(This is refered to in the Sega literature as a "Mega"(bit)
cartridge).
</p>
<p class="vspace">As with the 32 KByte memory, there is a contiguous section of
ROM in the bottom half of Z80A memory. This section is always
available to the Z80A.
</p>
<p class="vspace">Additionally, there are six banks of 16 Kilobyte ROM at memory
addresses $8000-$BFFF. Only one of these banks is available to
the Z80A at a time. Whenever one is selected, the other five
are inactive.
</p>
<p class="vspace">Which of the six banks is switched into the Z80A memory space is
controlled by a register at memory location $FFFF.
</p>
<p class="vspace">The Bank Control Register has the following format:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="left">$FFFF</th><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">b2</td><td align="center">b1</td><td align="center">b0</td></tr>
</tbody></table>
<p class="vspace">The banks are numbered from 2 through 7 (b2:b1:b0).
</p>
<p class="vspace">Although this write-only register exists in the memory
cartridge, writes to the register are duplicated in the RAM at
$FFFF. This means that the bank select register appears to be
read/write, even though what is actually read is the RAM image
of the register, rather than the contents of the register
itself.
</p>
<div class="vspace"></div><h3><a name="THECARTRIDGEHEADER" id="THECARTRIDGEHEADER"></a> THE CARTRIDGE HEADER</h3>
<p class="vspace">The presence of a cartridge is tested by checking for specific
information in ROM. This information must be correct for the
cartridge to be recognized.
</p>
<p class="vspace">Normally, Sega will add the correct information to the cartridge
before production. The information below is given for reference
only.
</p>
<p class="vspace">The header format is as follows (addresses shown for 32 KByte
and larger cartridges):
</p>
<div class="vspace"></div><h4><a name="At7FF0" id="At7FF0"></a> At $7FF0:</h4>
<p>The string, "TMR SEGA " [54,4D,52,20,53,45,47,41,20,20]
</p>
<div class="vspace"></div><h4><a name="At7FFA7FFB" id="At7FFA7FFB"></a> At $7FFA-$7FFB</h4>
<p>A 16-bit checksum for the ROM (low-hi order). $7FFA and $7FFB are
not included in this checksum.
</p>
<div class="vspace"></div><h4><a name="At7FFC7FFD" id="At7FFC7FFD"></a> At $7FFC-$7FFD</h4>
<p>A 16-bit serial number, assigned by Sega.
</p>
<div class="vspace"></div><h4><a name="At7FFE" id="At7FFE"></a> At $7FFE</h4>
<p>A software revision number byte.
</p>
<div class="vspace"></div><h4><a name="At7FFF" id="At7FFF"></a> At $7FFF</h4>
<p>ROM Size code:
</p>
<table border="1"><tbody><tr><td align="center">$4A</td><td align="right">8K</td><td align="right">(header at $1FF0)</td></tr>
<tr><td align="center">$4B</td><td align="right">16K</td><td align="right">(header at $3FF0)</td></tr>
<tr><td align="center">$4C</td><td align="right">32K</td><td>&nbsp;</td></tr>
<tr><td align="center">$4D</td><td align="right">48K</td><td>&nbsp;</td></tr>
<tr><td align="center">$4E</td><td align="right">64K</td><td>&nbsp;</td></tr>
<tr><td align="center">$4F</td><td align="right">128K</td><td align="left">(1M)</td></tr>
<tr><td align="center">$40</td><td align="right">256K</td><td align="left">(2M)</td></tr>
</tbody></table>
<div class="vspace"></div><h2><a name="INPUTOUTPUTIOPORTS" id="INPUTOUTPUTIOPORTS"></a> INPUT/OUTPUT (I/O) PORTS</h2>
<p class="vspace">Eight I/O ports are used by the Mk3:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">Port</th><th align="center">Direc</th><th align="left">Function</th></tr>
<tr><td align="center">$3E</td><td align="center">out</td><td align="left">Memory Enables</td></tr>
<tr><td align="center">$3F</td><td align="center">out</td><td align="left">Joystick port control</td></tr>
<tr><td align="center">$7E</td><td align="center">in</td><td align="left">Gun Spot (vertical)</td></tr>
<tr><td align="center">$7F</td><td align="center">in</td><td align="left">Gun spot (horizontal)</td></tr>
<tr><td>&nbsp;</td><td align="center">out</td><td align="left">Programmable Sound Generator (PSG)</td></tr>
<tr><td align="center">$BE</td><td align="center">i/o</td><td align="left">VDP Data Register</td></tr>
<tr><td align="center">$BF</td><td align="center">i/o</td><td align="left">VDP Command/Status Register</td></tr>
<tr><td align="center">$DC</td><td align="center">in</td><td align="left">Joystick port</td></tr>
<tr><td align="center">$DD</td><td align="center">in</td><td align="left">Joystick port</td></tr>
</tbody></table>
<p class="vspace">Port $3E is described in the MEMORY MANAGEMENT section.
</p>
<p class="vspace">Port $7F is described in the PSG section.
</p>
<p class="vspace">Ports $BE and $BF are described in the VDP section.
</p>
<p class="vspace">The remaining ports deal with the attached controls, and are
described in this section.
</p>
<p class="vspace">Ports $DC-$DD are connected to the two 9-pin connectors on the
front of the game console. Although these ports are called
"joystick ports", there are actually three devices that can be
plugged into the front connectors:
</p>
<div class="vspace"></div><ol><li>The joystick controls which include a joystick and two push buttons.
<div class="vspace"></div></li><li>The gun.
<div class="vspace"></div></li><li>A "Sports Pad" that consists of a trackball and two push buttons.
</li></ol><p class="vspace">The bits of input ports $DC and $DD are used for the joystick
assembly, gun, and Sports Pad (Trackball). These two ports work
in conjunction with port $3F, which sets the direction of four
of the bits, and provides two strobe bits for the Sports Pad.
The following table shows how the three ports are interpreted
for the joystick and gun options. All bits shown are inputs.
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">Port</th><th align="center">Bit</th><th align="left">Joystick</th><th align="left">Gun</th></tr>
<tr><td align="center">$DC</td><td align="center">0</td><td align="left">P1-up</td><td align="left">---</td></tr>
<tr><td align="center">$DC</td><td align="center">1</td><td align="left">P1-down</td><td align="left">---</td></tr>
<tr><td align="center">$DC</td><td align="center">2</td><td align="left">P1-left</td><td align="left">---</td></tr>
<tr><td align="center">$DC</td><td align="center">3</td><td align="left">P1-right</td><td align="left">---</td></tr>
<tr><td align="center">$DC</td><td align="center">4</td><td align="left">P1-SW1</td><td align="left">P1 Trigger</td></tr>
<tr><td align="center">$DC</td><td align="center">5</td><td align="left">P1-SW2</td><td align="left">---</td></tr>
<tr><td align="center">$DC</td><td align="center">6</td><td align="left">P2-up</td><td align="left">---</td></tr>
<tr><td align="center">$DC</td><td align="center">7</td><td align="left">P2-down</td><td align="left">---</td></tr>
<tr><td colspan="4">&nbsp;</td></tr>
<tr><td align="center">$DD</td><td align="center">0</td><td align="left">P2-left</td><td align="left">---</td></tr>
<tr><td align="center">$DD</td><td align="center">1</td><td align="left">P2-right</td><td align="left">---</td></tr>
<tr><td align="center">$DD</td><td align="center">2</td><td align="left">P2-SW1</td><td align="left">P2 Trigger</td></tr>
<tr><td align="center">$DD</td><td align="center">3</td><td align="left">P1-SW2</td><td align="left">---</td></tr>
<tr><td align="center">$DD</td><td align="center">4</td><td align="left">RESET*</td><td align="left">RESET*</td></tr>
<tr><td align="center">$DD</td><td align="center">5</td><td align="left">---</td><td align="left">---</td></tr>
<tr><td align="center">$DD</td><td align="center">6</td><td align="left">---</td><td align="left">P1 Light Pulse</td></tr>
<tr><td align="center">$DD</td><td align="center">7</td><td align="left">---</td><td align="left">P2 Light Pulse</td></tr>
<tr><td colspan="4">&nbsp;</td></tr>
<tr><td align="center">$3F</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr>
<tr><td align="center">$3F</td><td align="center">1</td><td align="center">1</td><td align="left">P1 Latch Enable</td></tr>
<tr><td align="center">$3F</td><td align="center">2</td><td align="center">1</td><td align="center">1</td></tr>
<tr><td align="center">$3F</td><td align="center">3</td><td align="center">1</td><td align="left">P2 Latch Enable</td></tr>
<tr><td align="center">$3F</td><td align="center">4</td><td align="center">1</td><td align="center">1</td></tr>
<tr><td align="center">$3F</td><td align="center">5</td><td align="center">1</td><td align="center">1</td></tr>
<tr><td align="center">$3F</td><td align="center">6</td><td align="center">1</td><td align="center">1</td></tr>
<tr><td align="center">$3F</td><td align="center">7</td><td align="center">1</td><td align="center">1</td></tr>
</tbody></table>
<div class="vspace"></div><h3><a name="HOWTHEGUNWORKS" id="HOWTHEGUNWORKS"></a> HOW THE GUN WORKS</h3>
<p class="vspace">The gun contains a lens and photocell which "sees" a spot on the
TV screen. This spot is circular, and increases in diameter as
the gun's distance from the screen increases.
</p>
<p class="vspace">When the TV beam reaches the area at which the gun is pointed,
two things happen:
</p>
<div class="vspace"></div><ol><li>A negative pulse of approximately 20-30 microseconds is generated on port $DD bit 6 (Player 1) or port $DD bit 7 (Player 2). This pulse is wide enough to allow a software loop to recognize it. The width of this pulse will vary with the game setup and TV type.
<div class="vspace"></div></li><li>The beam position is latched into horizontal and vertical registers, which are read at input ports $7E (vertical) and $7F (horizontal).
</li></ol><p class="vspace">The beam position can be latched either from a gun plugged into
the player 1 connector, a gun plugged into the player 2
connector, or both. [NOTE: The player 1 connector is the left
connector when the game console is viewed from the front].
</p>
<p class="vspace">Two bits in output port $3F determine which gun latches the beam
position. These are shown as "P1 Latch Enable" and "P2 Latch
Enable" in the preceding table.
</p>
<p class="vspace">The gun reading routine usually performs the following steps.
</p>
<div class="vspace"></div><ol><li>The trigger switch is checked. Normally the gun is not checked until someone pulls the trigger. (Data is continuously available from the gun, however).
<div class="vspace"></div></li><li>When the trigger is pulled, wait for the next VBLANK.
<div class="vspace"></div></li><li>At VBLANK, put up an all white screen (all color bytes are $3F). This gives enough light intensity on the screen for the gun to read any position.
<div class="vspace"></div></li><li>During the next scan, continuously check the light pulse bit for a high to low transition. (P1 Light Pulse is at input port $DD bit 6; P2 Light Pulse is at input port $DD bit 7).
<div class="vspace"></div></li><li>When the pulse is detected, read the Horizontal Position Register at $7F and the Vertical position Register at $7E.
<div class="vspace"></div></li><li>Wait for a low to high transition on the Light Pulse bit. Then repeat step 5 for all active horizontal lines.
<div class="vspace"></div></li><li>When finished with one scan, restore the screen to the normal color values.
</li></ol><p class="vspace">The gun responds to a circular spot on the TV, not a single
pixel. As the circular spot is "seen" by the photocell in the
gun, repeated negative pulses will occur on the Light Pulse bit
for several consecutive horizontal scan lines.
</p>
<p class="vspace">The horizontal values of the detected circle will, as the
vertical position register increments, decrease, increase, and
then stop as the left edge of the scanned circle is read by the
lens in the gun.
</p>
<p class="vspace">For this reason it is advisable to do some sort of averaging and
extrapolation to arrive at a center position of the scanned
circle.
</p>
<div class="vspace"></div><h3><a name="HOWTHETRACKBALLWORKS" id="HOWTHETRACKBALLWORKS"></a> HOW THE TRACKBALL WORKS</h3>
<p class="vspace">The interface to the trackball consists of six input bits and
one output bit.
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">Trackball</th><th align="center">dir</th><th align="left">Player 1</th><th align="left">Player 2</th></tr>
<tr><td align="center">b0</td><td align="center">in</td><td align="left">$DC bit 0</td><td align="left">$DC bit 6</td></tr>
<tr><td align="center">b1</td><td align="center">in</td><td align="left">$DC bit 1</td><td align="left">$DC bit 7</td></tr>
<tr><td align="center">b2</td><td align="center">in</td><td align="left">$DC bit 2</td><td align="left">$DD bit 0</td></tr>
<tr><td align="center">b3</td><td align="center">in</td><td align="left">$DC bit 3</td><td align="left">$DD bit 1</td></tr>
<tr><td colspan="4">&nbsp;</td></tr>
<tr><td align="center">S1</td><td align="center">in</td><td align="left">$DC bit 4</td><td align="left">$DD bit 2</td></tr>
<tr><td align="center">S2</td><td align="center">in</td><td align="left">$DC bit 5</td><td align="left">$DD bit 3</td></tr>
<tr><td colspan="4">&nbsp;</td></tr>
<tr><td align="left">STROBE</td><td align="center">out</td><td align="left">$3F bit 5</td><td align="left">$3F bit 7</td></tr>
</tbody></table>
<p class="vspace">Before using the trackball, the following two instructions
should be executed to set the STROBE bit directions to output,
and initialize the strobe signals to 1. NOTE: these instructions
are executed in the power-on initialization.
</p>
<div class="vspace"></div>
<div class="sourceblock " id="sourceblock2">
  <div class="sourceblocktext"><div class="z80" style="font-family:monospace;"><span class="kw1">LD</span> <span class="kw2">A</span>,<span class="re1">10100101b</span> <span class="co1">; b1,b3 set strobe direction to output</span><br>
<span class="kw1">OUT</span> <span class="br0">(</span><span class="re0">03FH</span><span class="br0">)</span>,<span class="kw2">A</span> <span class="co1">; b5,b7 are actual strobe bit values</span></div></div>
  <div class="sourceblocklink"><a href="http://www.smspower.org/Development/SMSOfficalDocs?action=sourceblock&amp;num=2" type="text/plain">Get Code</a></div>
</div>

<p class="vspace">The strobe signal is then used to clock in four 4-bit nibbles
b3-b0, which occur in the following order:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">Nibble #</th><th align="left">Data</th><th align="center">When STROBE is:</th></tr>
<tr><td>&nbsp;</td><td align="left">b3 b2 b1 b0</td><td>&nbsp;</td></tr>
<tr><td align="center">1</td><td align="left">X7 X6 X5 X4</td><td align="center">LO</td></tr>
<tr><td align="center">2</td><td align="left">X3 X2 X1 X0</td><td align="center">HI</td></tr>
<tr><td align="center">3</td><td align="left">Y7 Y6 Y5 Y4</td><td align="center">LO</td></tr>
<tr><td align="center">4</td><td align="left">Y3 Y2 Y1 Y0</td><td align="center">HI</td></tr>
</tbody></table>
<p class="vspace">The X,Y positions of the trackball are represented as X7-X0 and
Y7-Y0. These are 8-bit counters which wrap around from $FF to
$00.
</p>
<p class="vspace">As the ball is spun to the right, the X value increase; as it
is spun to the left, they decrease. As the ball is spun upward,
the Y values increase; as it is spun downward, they decrease.
</p>
<p class="vspace">The timing of the STROBE transitions is important. Here is the
required sequence:
</p>
<div class="vspace"></div><h4><a name="ProgramSequenceToReadTrackball" id="ProgramSequenceToReadTrackball"></a> Program Sequence to Read Trackball</h4>
<p>[Start with STROBE HI].
</p>
<div class="vspace"></div><ol><li>STROBE LO.
</li><li>Wait 80 microseconds.
</li><li>Read first nibble.
</li><li>STROBE HI.
</li><li>Wait 40 microseconds.
</li><li>Read second nibble.
</li><li>STROBE LO.
</li><li>Wait 40 microseconds.
</li><li>Read third nibble.
</li><li>STROBE HI.
</li><li>Wait 40 microseconds.
</li><li>Read fourth nibble.
</li><li>(done-STROBE is HI).
</li></ol><p class="vspace"><a href="http://www.smspower.org/Development/SMSOfficalDocs#AppendixD">Appendix D</a> shows working code to read the trackball each
interrupt.
</p>
<div class="vspace"></div><h2><a name="PROGRAMMABLESOUNDGENERATORPSG" id="PROGRAMMABLESOUNDGENERATORPSG"></a> PROGRAMMABLE SOUND GENERATOR (PSG)</h2>
<p>The PSG contains four sound channels, consisting of three tone
generators and a noise generator. Each of the four channels has
an independent volume control (attenuator). The PSG is
controlled through output port $7F.
</p>
<div class="vspace"></div><h3><a name="TONEGENERATORFREQUENCY" id="TONEGENERATORFREQUENCY"></a> TONE GENERATOR FREQUENCY</h3>
<p>The frequency (pitch) of a tone generator is set by a 10-bit
value. This value is counted down until it reaches zero, at
which time the tone output toggles and the 10-bit value is
reloaded into the counter. Thus, higher 10-bit numbers produce
lower frequencies.
</p>
<p class="vspace">To load a new frequency value into one of the tone generators,
you write a pair of bytes to I/O locations $7F according to the
following format:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="left">First Byte:</th><td align="center">1</td><td align="center">R2</td><td align="center">R1</td><td align="center">R0</td><td align="center">d3</td><td align="center">d2</td><td align="center">d1</td><td align="center">d0</td></tr>
<tr><th align="left">Second Byte:</th><td align="center">0</td><td align="center">0</td><td align="center">d9</td><td align="center">d8</td><td align="center">d7</td><td align="center">d6</td><td align="center">d5</td><td align="center">d4</td></tr>
</tbody></table>
<p class="vspace">The R2:R1:R0 field selects the tone channel as follows:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">R2</th><th align="center">R1</th><th align="center">R0</th><th align="center">Tone Channel</th></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">#1</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">#2</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">#3</td></tr>
</tbody></table>
<p class="vspace">10-bit data is (msb) d9 d8 d7 d6 d5 d4 d3 d2 d1 d0 (lsb)
</p>
<div class="vspace"></div><h3><a name="NOISEGENERATORCONTROL" id="NOISEGENERATORCONTROL"></a> NOISE GENERATOR CONTROL</h3>
<p class="vspace">The noise generator uses three control bits to select the
"character" of the noise sound. A bit called "FB" (Feedback)
produces periodic noise or "white" noise:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">FB</th><th align="left">Noise Type</th></tr>
<tr><td align="center">0</td><td align="left">Periodic (like low-frequency tone)</td></tr>
<tr><td align="center">1</td><td align="left">White (hiss)</td></tr>
</tbody></table>
<p class="vspace">The frequency of the noise is selected by two bits NF1:NF0
according to the following table:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">NF1</th><th align="center">NF0</th><th align="left">Noise Generator Clock Source</th></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="left">Clock/2 [Higher pitch, "less coarse"]</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="left">Clock/4</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="left">Clock/8 [Lower pitch, "more coarse"]</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="left">Tone Generator #3</td></tr>
</tbody></table>
<p class="vspace">Note: "Clock" is fixed in frequency. It is a crystal controlled
oscillator signal connected to the PSG.
</p>
<p class="vspace">When NF1:NF0 is 11, Tone Generator #3 supplies the noise clock
source. This allows the noise to be "swept" in frequency. This
effect might be used for a jet engine runup, for example.
</p>
<p class="vspace">To load these noise generator control bits, write the following
byte to I/O port $7F:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="left">Out ($7F):</th><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">FB</td><td align="center">NF1</td><td align="center">NF0</td></tr>
</tbody></table>
<div class="vspace"></div><h3><a name="ATTENUATORS" id="ATTENUATORS"></a> ATTENUATORS</h3>
<p class="vspace">Four attenuators adjust the volume of the three tone generators
and the noise channel. Four bits A3:A2:A1:A0 control the
attenuation as follows:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="center">A3</th><th align="center">A2</th><th align="center">A1</th><th align="center">A0</th><th align="left">Attenuation</th></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="right">0 db</td></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="right">2 db</td></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="right">4 db</td></tr>
<tr><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="right">6 db</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="right">8 db</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="right">10 db</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="right">12 db</td></tr>
<tr><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="right">14 db</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="right">16 db</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="right">18 db</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="right">20 db</td></tr>
<tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="right">22 db</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="right">24 db</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="right">26 db</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="right">28 db</td></tr>
<tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="right">-Off-</td></tr>
</tbody></table>
<p class="vspace">NOTE: a higher attenuation results in a quieter sound.
</p>
<p class="vspace">The attenuators are set for the four channels by writing the
following bytes to I/O location $7F:
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="left">Tone Generator #1:</th><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
<tr><th align="left">Tone Generator #2:</th><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
<tr><th align="left">Tone Generator #3:</th><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
<tr><th align="left">Noise Generator:</th><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">A3</td><td align="center">A2</td><td align="center">A1</td><td align="center">A0</td></tr>
</tbody></table>
<div class="vspace"></div><h3><a name="EXAMPLE" id="EXAMPLE"></a> EXAMPLE</h3>
<p>When the Mk3 is powered on, the following code is executed:
</p>
<div class="vspace"></div>
<div class="sourceblock " id="sourceblock3">
  <div class="sourceblocktext"><div class="z80" style="font-family:monospace;">&nbsp;<span class="kw1">LD</span> <span class="kw2">HL</span>,CLRTB <span class="co1">; clear table</span><br>
&nbsp;<span class="kw1">LD</span> <span class="kw2">C</span>,PSG_PRT <span class="co1">; psg port is $7F</span><br>
&nbsp;<span class="kw1">LD</span> <span class="kw2">B</span>,<span class="nu0">4</span> <span class="co1">; load four bytes</span><br>
&nbsp;<span class="kw1">OTIR</span> <span class="co1">; write them</span><br>
&nbsp;<span class="br0">(</span>etc.<span class="br0">)</span><br>
<br>
CLRTB defb <span class="re0">$9F</span>,<span class="re0">$BF</span>,<span class="re0">$DF</span>,<span class="re0">$FF</span></div></div>
  <div class="sourceblocklink"><a href="http://www.smspower.org/Development/SMSOfficalDocs?action=sourceblock&amp;num=3" type="text/plain">Get Code</a></div>
</div>

<p class="vspace">This code turns the four sound channels off. It's a good idea to
also execute this code when the PAUSE button is pressed, so that
the sound does not stay on continuously for the pause interval.
</p>
<div class="vspace"></div><h2><a name="AppendixAVDPRegisters" id="AppendixAVDPRegisters"></a> Appendix A - VDP Registers</h2>
<table border="1"><tbody><tr><th align="left">R0</th><td align="left">VScroll Inhibit</td><td align="left">HScroll Inhibit</td><td align="left">LEFT Col Blank</td><td align="center">IE1</td><td align="center">Sprite Shift</td><td align="center">1</td><td align="center">1 (M3)</td><td align="center">0</td><td>&nbsp;</td></tr>
<tr><th align="left">R1</th><td align="left">1</td><td align="left">Screen Enable Bit</td><td align="left">IE</td><td align="left">0 (M1)</td><td align="left">0 (M2)</td><td align="left">0</td><td align="left">Sprite Size 8/16</td><td align="left">Sprite Mag</td><td>&nbsp;</td></tr>
<tr><th align="left">R2</th><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">SCRN BASE 2</td><td align="left">SCRN BASE 1</td><td align="left">SCRN BASE 0</td><td align="left">$FF (Screen Base at $3800)</td></tr>
<tr><th align="left">R3</th><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">$FF</td></tr>
<tr><th align="left">R4</th><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">$FF</td></tr>
<tr><th align="left">R5</th><td align="left">1</td><td align="left">SAT BASE 5</td><td align="left">SAT BASE 4</td><td align="left">SAT BASE 3</td><td align="left">SAT BASE 2</td><td align="left">SAT BASE 1</td><td align="left">SAT BASE 0</td><td align="left">1</td><td align="left">$FF (SAT at $3F00)<br>SAT = Sprite Attribute Table</td></tr>
<tr><th align="left">R6</th><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">CGEN BANK 0</td><td align="left">1</td><td align="left">1</td><td align="left">$FB (CGEN at $0000)<br>CGEN = Character Generator</td></tr>
<tr><th align="left">R7</th><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">1</td><td align="left">BORDER 3</td><td align="left">BORDER 2</td><td align="left">BORDER 1</td><td align="left">BORDER 0</td><td align="left">Border Color</td></tr>
<tr><th align="left">R8</th><td align="left">HSCROLL 7</td><td align="left">HSCROLL 6</td><td align="left">HSCROLL 5</td><td align="left">HSCROLL 4</td><td align="left">HSCROLL 3</td><td align="left">HSCROLL 2</td><td align="left">HSCROLL 1</td><td align="left">HSCROLL 0</td><td align="left">$00 Horizontal Scroll<br>&lt;----</td></tr>
<tr><th align="left">R9</th><td align="left">VSCROLL 7</td><td align="left">VSCROLL 6</td><td align="left">VSCROLL 5</td><td align="left">VSCROLL 4</td><td align="left">VSCROLL 3</td><td align="left">VSCROLL 2</td><td align="left">VSCROLL 1</td><td align="left">VSCROLL 0</td><td align="left">$00 Vertical Scroll</td></tr>
<tr><th align="left">R10</th><td align="left">HLI 7</td><td align="left">HLI 6</td><td align="left">HLI 5</td><td align="left">HLI 4</td><td align="left">HLI 3</td><td align="left">HLI 2</td><td align="left">HLI 1</td><td align="left">HLI 0</td><td align="left">$FF Horizontal Line Interrupt<br>($C1-$FF=Disable)</td></tr>
<tr><th align="left">Read Port $BF (VDP STATUS)</th><td align="left">INTR SOURCE (VBL)</td><td align="left">NINE SPRITES FLAG</td><td align="left">SPRITES COLLIDE FLAG</td><td align="left">X</td><td align="left">X</td><td align="left">X</td><td align="left">X</td><td align="left">X</td><td>&nbsp;</td></tr>
</tbody></table>
<p class="vspace">Write Port $BF (VDP CONTROL)<br>To write VDP Register<br>r3:r2:r1:r0 = Reg. No.
</p>
<div class="vspace"></div>
<table border="1"><tbody><tr><th align="left">First Byte:</th><td align="center" colspan="8">Register Data</td></tr>
<tr><th align="left">Second Byte:</th><td align="left">1</td><td align="left">0</td><td align="left">X</td><td align="left">X</td><td align="left">r3</td><td align="left">r2</td><td align="left">r1</td><td align="left">r0</td></tr>
</tbody></table>
<p class="vspace">NOTE: First disable interrupts since VDP command register must be written to twice always. (Interrupts read the status register and VDP register accesses are sequence sensitive.)
</p>
<div class="vspace"></div><h2><a name="APPENDIXBINPUTOUTPUTSYSTEM" id="APPENDIXBINPUTOUTPUTSYSTEM"></a> APPENDIX B - INPUT/OUTPUT SYSTEM</h2>
<table border="1"><tbody><tr><th valign="top">$3E
</th><td valign="top"><span style="text-decoration: overline;">EXT  </span>
</td><td valign="top"><span style="text-decoration: overline;">CARTR</span>
</td><td valign="top"><span style="text-decoration: overline;">CARD  </span>
</td><td valign="top">INTER <span style="text-decoration: overline;">RAM  </span>
</td><td valign="top"><span style="text-decoration: overline;">OS ROM </span>
</td><td valign="top"><span style="text-decoration: overline;">JOY  </span>
</td><td valign="top">
</td><td valign="top">
</td><td valign="top">MEMORY ENABLES
</td></tr><tr><th valign="top">$3F
</th><td valign="top">P2 TRIG OUTPUT LEVEL
</td><td valign="top">P2 TH OUTPUT LEVEL
</td><td valign="top">P1 TRIG OUTPUT LEVEL
</td><td valign="top">P1 TH OUTPUT LEVEL
</td><td valign="top">P2 TRIG DATA DIRECTN
</td><td valign="top">P2 TH DATA DIRECTN
</td><td valign="top">P1 TRIG DATA DIRECTN
</td><td valign="top">P1 TH DATA DIRECTN
</td><td valign="top">DATA DIRECTION REGISTERS AND OUTPUT DATA LEVELS<br>1 = Input, 0 = Output
</td></tr><tr><th valign="top">$7E
</th><td valign="top">V7
</td><td valign="top">V6
</td><td valign="top">V5
</td><td valign="top">V4
</td><td valign="top">V3
</td><td valign="top">V2
</td><td valign="top">V1
</td><td valign="top">V0
</td><td rowspan="2" valign="top">Read: Gun Position
</td></tr><tr><th valign="top">$7F
</th><td valign="top">H7
</td><td valign="top">H6
</td><td valign="top">H5
</td><td valign="top">H4
</td><td valign="top">H3
</td><td valign="top">H2
</td><td valign="top">H1
</td><td valign="top">H0
</td></tr><tr><th valign="top">$7F
</th><td colspan="8" valign="top">
</td><td valign="top">Write: Programmable Sound Generator (PSG) control.
</td></tr><tr><th valign="top">$BE
</th><td colspan="8" valign="top">
</td><td valign="top">Read:  VDP Data<br>Write: VDP Data
</td></tr><tr><th valign="top">$BF
</th><td colspan="8" valign="top">
</td><td valign="top">Write: VDP Command
</td></tr><tr><th valign="top">$BF
</th><td valign="top">INTERRUPT SOURCE<br>0: Line Interrupt.<br>1: Vertical Intterupt.
</td><td valign="top">SPRITE OVERFLOW<br>1: Too many sprites on a line.
</td><td valign="top">SPRITE COLLISION<br>1. Two sprites touched.
</td><td colspan="5" valign="top">
</td><td valign="top">Read:  VDP Status<br>Latched at HBlank time, cleared by reading $BF.
</td></tr><tr><th valign="top">$DC
</th><td valign="top">P2 DN
</td><td valign="top">P2 UP
</td><td valign="top">P1 S2
</td><td valign="top">P1 S1 (TRG)
</td><td valign="top">P1 RT
</td><td valign="top">P1 LF
</td><td valign="top">P1 DN
</td><td valign="top">P1 UP
</td><td rowspan="2" valign="top">Read: Joystick Ports
</td></tr><tr><th valign="top">$DD
</th><td valign="top">P2 TH (L.Gun Synch)
</td><td valign="top">P1 TH (L.Gun Synch)
</td><td valign="top">
</td><td valign="top"><span style="text-decoration: overline;">RESET</span>
</td><td valign="top">P2 S2 
</td><td valign="top">P2 S1 (TRG)
</td><td valign="top">P2 RT
</td><td valign="top">P2 LF
</td></tr></tbody></table>
<div class="vspace"></div><h2><a name="AppendixC" id="AppendixC"></a> Appendix C</h2>

<div class="sourceblock " id="sourceblock4">
  <div class="sourceblocktext"><div class="z80" style="font-family:monospace;"><ol><li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; CDATA &nbsp; EQU &nbsp; &nbsp; <span class="re0">0C100H</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; Gun Status Work (1)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; HVCNT &nbsp; EQU &nbsp; &nbsp; CDATA<span class="sy0">+</span><span class="nu0">1</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; RAM Save Counter (1)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; HVDATA &nbsp;EQU &nbsp; &nbsp; HVCNT<span class="sy0">+</span><span class="nu0">1</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; V.H Counter Save Work (40H)</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; GCHKCT &nbsp;EQU &nbsp; &nbsp; HVDATA<span class="sy0">+</span><span class="re0">040H</span> &nbsp; &nbsp; <span class="co1">; (1)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; GCHKWK &nbsp;EQU &nbsp; &nbsp; GCHKCT<span class="sy0">+</span><span class="nu0">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; (10)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; SHOOTF &nbsp;EQU &nbsp; &nbsp; GCHKWK<span class="sy0">+</span><span class="nu0">10</span> &nbsp; &nbsp; &nbsp; <span class="co1">; Gun Shot Flag (1)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; HPOSI &nbsp; EQU &nbsp; &nbsp; SHOOTF<span class="sy0">+</span><span class="nu0">1</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; H.Position Data (1)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; VPOSI &nbsp; EQU &nbsp; &nbsp; HPOSI<span class="sy0">+</span><span class="nu0">1</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; V.Position Data (1)</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; SWDATA &nbsp;EQU &nbsp; &nbsp; VPOSI<span class="sy0">+</span><span class="nu0">1</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; Switch Data (2)</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; ****** &nbsp; GUN SHOOT ADDRESS SEARCH &nbsp; ***** &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li2"><div class="de2"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">GUNS:</span>:</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,HVCNT</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">DE</span>,HVDATA</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span>,<span class="nu0">32</span></div></li>
<li class="li1"><div class="de1"><span class="re2">GUNS1:</span>:</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>CDATA<span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; Color Data Flag Work</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DEC</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span> &nbsp; &nbsp; NZ</div></li>
<li class="li1"><div class="de1"><span class="re2">GUNSPP:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="re0">0DDH</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">040H</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; bit 6, a Player 1 Pulse</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;NZ,GUNSPP &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; wait for low</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CP</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JR</span> &nbsp; &nbsp; &nbsp;NC,GUNSPP</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; Counter Up</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="re0">07FH</span><span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; H.Counter Read</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">DE</span><span class="br0">)</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; RAM Save</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">DE</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="re0">07EH</span><span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; V.Counter Read</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">DE</span><span class="br0">)</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; RAM Save</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">DE</span></div></li>
<li class="li2"><div class="de2"><span class="re2">GUNS2:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="re0">0DDH</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">040H</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; bit 6</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;Z,GUNS2</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;GUNSPP</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; ***** &nbsp; V &amp; H DATA CHECK &nbsp; ***** &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="re2">GUNCHK:</span>:</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>SHOOTF<span class="br0">)</span> &nbsp; &nbsp; &nbsp; <span class="co1">; Gun Shoot Flag</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span> &nbsp; &nbsp; Z</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">XOR</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>SHOOTF<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li2"><div class="de2"><span class="re2">GUNCHKTI:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>HVCNT<span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; V &amp; H Counter</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CP</span> &nbsp; &nbsp; &nbsp;<span class="nu0">5</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span> &nbsp; &nbsp; <span class="kw2">C</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DEC</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,HVDATA<span class="sy0">+</span><span class="nu0">1</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span>,0H</div></li>
<li class="li1"><div class="de1"><span class="re2">GUNNCH:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; V.Counter</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">E</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">HL</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">HL</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">XOR</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">SUB</span> &nbsp; &nbsp; <span class="kw2">C</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CP</span> &nbsp; &nbsp; &nbsp;<span class="nu0">3</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CALL</span> &nbsp; &nbsp;NC,GCWKL2</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;GUNNCH</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CALL</span> &nbsp; &nbsp;GCHKL2</div></li>
<li class="li1"><div class="de1"><span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CALL</span> &nbsp; &nbsp;CHGN</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; H-COUNTER READ</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CP</span> &nbsp; &nbsp; &nbsp;<span class="re0">0A0H</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span> &nbsp; &nbsp; NC</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="kw2">A</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; CARRY FLAG = CLEAR</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">SUB</span> &nbsp; &nbsp; <span class="re0">016H</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; A=A-14H</span></div></li>
<li class="li2"><div class="de2"><span class="co1">;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;SUB &nbsp; &nbsp;016H-004H :Right ?? ?????</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;SUB &nbsp; &nbsp;016H+004H :Left ?? ?????</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">SLA</span> &nbsp; &nbsp; <span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; A=A*2</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; REPT &nbsp; &nbsp;<span class="nu0">5</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; ENDM</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="kw2">A</span>,<span class="re0">07H</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; CARRY FLAG = CLEAR</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">ADD</span> &nbsp; &nbsp; <span class="kw2">B</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; A=A+A/16</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>HPOSI<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">HL</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; V.Counter Read</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="kw2">A</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; CARRY FLAG = CLEAR</span></div></li>
<li class="li2"><div class="de2"><span class="co1">;SUB &nbsp; &nbsp;018H &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; A=A-18H</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">SUB</span> &nbsp; &nbsp; <span class="re0">001H</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>VPOSI<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; * Color Data Set * &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">XOR</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span><span class="re0"><span class="re1">0B</span>FH</span><span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re0">0C0H</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span><span class="re0"><span class="re1">0B</span>FH</span><span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">BC</span>,<span class="re0">02<span class="re1">0B</span>EH</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,COLORTBL &nbsp; &nbsp; &nbsp; <span class="co1">; Color Data Table</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OTIR</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span></div></li>
<li class="li1"><div class="de1"><span class="re2">COLORTBL:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; DEFB &nbsp; &nbsp;<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; DEFB &nbsp; &nbsp;<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; DEFB &nbsp; &nbsp;<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; DEFB &nbsp; &nbsp;<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span>,<span class="re0">000H</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2"><span class="co1">;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;</span></div></li>
<li class="li1"><div class="de1"><span class="re2">GCHKL2:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">PUSH</span> &nbsp; &nbsp;<span class="kw2">HL</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,GCHKCT</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CP</span> &nbsp; &nbsp; &nbsp;<span class="nu0">5</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;NC,GCHL1</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,GCHKWK</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">PUSH</span> &nbsp; &nbsp;<span class="kw2">DE</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span>,<span class="nu0">0</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">ADD</span> &nbsp; &nbsp; <span class="kw2">HL</span>,<span class="kw2">DE</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">POP</span> &nbsp; &nbsp; <span class="kw2">DE</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span>,<span class="kw2">E</span></div></li>
<li class="li1"><div class="de1"><span class="re2">GCHL1:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">POP</span> &nbsp; &nbsp; <span class="kw2">HL</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span>,0H</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span></div></li>
<li class="li2"><div class="de2"><span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="re2">CHGGN:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;CHGN4</div></li>
<li class="li2"><div class="de2"><span class="co1">;</span></div></li>
<li class="li1"><div class="de1"><span class="re2">CHGN:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,GCHKWK</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span>,<span class="nu0">0</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>GCHKCT<span class="br0">)</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CP</span> &nbsp; &nbsp; &nbsp;<span class="nu0">1</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;Z,CHGGN</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1"><span class="re2">CHGN1:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li2"><div class="de2"><span class="re2">CHGN2:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">HL</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CP</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span>,CHGN3</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;CHGN2</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;CHGN4</div></li>
<li class="li1"><div class="de1"><span class="re2">CHGN3:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">C</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;CHGN1</div></li>
<li class="li1"><div class="de1"><span class="re2">CHGN4:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">07FH</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="kw2">C</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="kw2">B</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;Z,CHGN6</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,GCHKWK</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">XOR</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li1"><div class="de1"><span class="re2">CHGN5:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">ADD</span> &nbsp; &nbsp; <span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;CHGN5</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">ADD</span> &nbsp; &nbsp; <span class="kw2">A</span>,<span class="kw2">C</span></div></li>
<li class="li1"><div class="de1"><span class="re2">CHGN7:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">ADD</span> &nbsp; &nbsp; <span class="kw2">A</span>,<span class="kw2">A</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">0</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,HVDATA</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">ADD</span> &nbsp; &nbsp; <span class="kw2">HL</span>,<span class="kw2">BC</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span></div></li>
<li class="li2"><div class="de2"><span class="re2">CHGN6:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="kw2">C</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;CHGN7</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;***** &nbsp; GUN CHECK &nbsp; ***** &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li2"><div class="de2"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="re2">GUNINT:</span>:</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,CDATA &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; Flash States Work</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span>,<span class="nu0">2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DEC</span> &nbsp; &nbsp; <span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; CP 1</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span> &nbsp; &nbsp; Z &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">;(CDATA) = 1 ---&gt; (CDATA) = 2 , RET</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span>,<span class="nu0">0</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DEC</span> &nbsp; &nbsp; <span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; CP 2</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span> &nbsp; &nbsp; Z &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">;(CDATA) = 2 ---&gt; (CDATA) = 0 , RET</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CALL</span> &nbsp; &nbsp;SWSET</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">010H</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; bit 4</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span> &nbsp; &nbsp; Z &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">;(CDATA) = 0 , TRI. = OFF ---&gt; RET</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">XOR</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>HVCNT<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="nu0">1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; A.res = 1</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>CDATA<span class="br0">)</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">;(CDATA) = 0 , TRI. = ON ---&gt; (CDATA) = 1 , RET</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>SHOOTF<span class="br0">)</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; Gun Shoot Flag Set</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; * Screen Flash *</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">XOR</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span><span class="re0"><span class="re1">0B</span>FH</span><span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re0">0C0H</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span><span class="re0"><span class="re1">0B</span>FH</span><span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re0">03FH</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span><span class="re0"><span class="re1">0B</span>EH</span><span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; * RAM Clear *</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,HVCNT</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">DE</span>,HVCNT<span class="sy0">+</span><span class="nu0">1</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">BC</span>,<span class="re0">001H</span><span class="sy0">+</span><span class="re0">040H</span><span class="sy0">+</span><span class="re0">001H</span><span class="sy0">+</span><span class="nu0">10</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span>,<span class="nu0">0</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LDIR</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span></div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li2"><div class="de2"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li2"><div class="de2"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.0.1.0 &nbsp; &nbsp; &nbsp; now &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------- CPL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1.0.1 &nbsp; &nbsp; &nbsp; now &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1.0.0 &nbsp; &nbsp; &nbsp; old &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------- AND &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li2"><div class="de2"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.1.0.0 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ------- CPL &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.0.1.1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="re2">SWSET:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span><span class="re0">0DCH</span><span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">010H</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; bit 4</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,SWDATA &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; Switch data save area</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">CPL</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">C</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; Data save</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">XOR</span> &nbsp; &nbsp; <span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span>,<span class="kw2">C</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; New SW.data save</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">INC</span> &nbsp; &nbsp; <span class="kw2">HL</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="kw2">C</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; ACC : '0' --&gt; '1' change but data</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">HL</span><span class="br0">)</span>,<span class="kw2">A</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">; Data save</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span></div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li2"><div class="de2">&nbsp;</div></li>
<li class="li1"><div class="de1">&nbsp;</div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; *** Interrupt Jump Check *** &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;=======================================================;</span></div></li>
<li class="li2"><div class="de2">:ORG &nbsp; &nbsp;<span class="re0">038H</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">PUSH</span> &nbsp; &nbsp;<span class="kw2">AF</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>CDATA<span class="br0">)</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; Gun Set ?</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DEC</span> &nbsp; &nbsp; <span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JR</span> &nbsp; &nbsp; &nbsp;NZ,INSS</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">EX</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">SP</span><span class="br0">)</span>,<span class="kw2">HL</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">; Stack Pointer Change</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">POP</span> &nbsp; &nbsp; <span class="kw2">HL</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">HL</span>,GUNS1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">EX</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span><span class="kw2">SP</span><span class="br0">)</span>,<span class="kw2">HL</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">;</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">PUSH</span> &nbsp; &nbsp;<span class="kw2">AF</span></div></li>
<li class="li2"><div class="de2"><span class="re2">INSS:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">POP</span> &nbsp; &nbsp; <span class="kw2">AF</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">JP</span> &nbsp; &nbsp; &nbsp;INT38</div></li>
</ol></div></div>
  <div class="sourceblocklink"><a href="http://www.smspower.org/Development/SMSOfficalDocs?action=sourceblock&amp;num=4" type="text/plain">Get Code</a></div>
</div>

<div class="vspace"></div><h2><a name="AppendixD" id="AppendixD"></a> Appendix D</h2>

<div class="sourceblock " id="sourceblock5">
  <div class="sourceblocktext"><div class="z80" style="font-family:monospace;"><ol><li class="li1"><div class="de1"><span class="co1">;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; TRACK BALL SWITCH READ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RET &nbsp; &nbsp; P1_TRX ~ PLAYER 1 CONDITION (-7FH ~ 7FH) &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P1_TRY ~ PLAYER 1 CONDITION (-7FH ~ 7FH) &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li2"><div class="de2"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P2_TRX ~ PLAYER 2 CONDITION (-7FH ~ 7FH) &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; P2_TRY ~ PLAYER 2 CONDITION (-7FH ~ 7FH) &nbsp; &nbsp; &nbsp; &nbsp;;</span></div></li>
<li class="li1"><div class="de1"><span class="co1">;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~;</span></div></li>
<li class="li1"><div class="de1"><span class="re2">T_BALL:</span>:</div></li>
<li class="li1"><div class="de1"><span class="re2">TRACK_X1:</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">00001101B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">25</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">0FH</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">00101101B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">13</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">0FH</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">NEG</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>P1_TRX<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li2"><div class="de2"><span class="re2">TRACK_Y1:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">00001101B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">13</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">0FH</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">00101101B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">13</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re0">0FH</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">NEG</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>P1_TRY<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1"><span class="re2">TRACK_X2:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">00000111B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">25</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11000000B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P2_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">10000111B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">13</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11000000B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P2_SWPT<span class="br0">)</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RLCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RLCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">NEG</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>P2_TRX<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1"><span class="re2">TRACK_Y2:</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">00000111B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">25</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11000000B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P2_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RRCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="re1">10000111B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OUT</span> &nbsp; &nbsp; <span class="br0">(</span>PSWC<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">B</span>,<span class="nu0">13</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">DJNZ</span> &nbsp; &nbsp;$</div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P1_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11000000B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span>,<span class="kw2">A</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">IN</span> &nbsp; &nbsp; &nbsp;<span class="kw2">A</span>,<span class="br0">(</span>P2_SWPT<span class="br0">)</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">AND</span> &nbsp; &nbsp; <span class="re1">11B</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">E</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RLCA</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RLCA</span></div></li>
<li class="li2"><div class="de2">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">OR</span> &nbsp; &nbsp; &nbsp;<span class="kw2">D</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">NEG</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">LD</span> &nbsp; &nbsp; &nbsp;<span class="br0">(</span>P2_TRY<span class="br0">)</span>,<span class="kw2">A</span></div></li>
<li class="li1"><div class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">RET</span></div></li>
</ol></div></div>
  <div class="sourceblocklink"><a href="http://www.smspower.org/Development/SMSOfficalDocs?action=sourceblock&amp;num=5" type="text/plain">Get Code</a></div>
</div>

<hr>
<div class="fpltemplate"></div>
<ul><li><a class="wikilink" href="http://www.smspower.org/Development/Index">Back to Development index</a>
</li></ul><div class="vspace"></div>
</div>

<hr>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_tumblr addthis_button_preferred_1 at300b" target="_blank" title="Tumblr" href="http://www.smspower.org/Development/SMSOfficalDocs#"><span class="at-icon-wrapper" style="background-color: rgb(55, 69, 92); line-height: 16px; height: 16px; width: 16px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" title="Tumblr" alt="Tumblr" class="at-icon at-icon-tumblr" style="width: 16px; height: 16px;"><g><path d="M19.59 22.176c-.392.186-1.14.348-1.695.362-1.682.045-2.008-1.18-2.022-2.07V13.93h4.218v-3.18H15.89V5.403h-3.076c-.05 0-.138.044-.15.157-.18 1.636-.947 4.51-4.133 5.66v2.71h2.124v6.862c0 2.35 1.733 5.688 6.308 5.61 1.544-.028 3.258-.674 3.637-1.23l-1.01-2.996" fill-rule="evenodd"></path></g></svg></span></a>
<a class="addthis_button_facebook addthis_button_preferred_2 at300b" title="Facebook" href="http://www.smspower.org/Development/SMSOfficalDocs#"><span class="at-icon-wrapper" style="background-color: rgb(59, 89, 152); line-height: 16px; height: 16px; width: 16px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" title="Facebook" alt="Facebook" class="at-icon at-icon-facebook" style="width: 16px; height: 16px;"><g><path d="M22 5.16c-.406-.054-1.806-.16-3.43-.16-3.4 0-5.733 1.825-5.733 5.17v2.882H9v3.913h3.837V27h4.604V16.965h3.823l.587-3.913h-4.41v-2.5c0-1.123.347-1.903 2.198-1.903H22V5.16z" fill-rule="evenodd"></path></g></svg></span></a>
<a class="addthis_button_twitter addthis_button_preferred_3 at300b" title="Tweet" href="http://www.smspower.org/Development/SMSOfficalDocs#"><span class="at-icon-wrapper" style="background-color: rgb(29, 161, 242); line-height: 16px; height: 16px; width: 16px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" title="Twitter" alt="Twitter" class="at-icon at-icon-twitter" style="width: 16px; height: 16px;"><g><path d="M27.996 10.116c-.81.36-1.68.602-2.592.71a4.526 4.526 0 0 0 1.984-2.496 9.037 9.037 0 0 1-2.866 1.095 4.513 4.513 0 0 0-7.69 4.116 12.81 12.81 0 0 1-9.3-4.715 4.49 4.49 0 0 0-.612 2.27 4.51 4.51 0 0 0 2.008 3.755 4.495 4.495 0 0 1-2.044-.564v.057a4.515 4.515 0 0 0 3.62 4.425 4.52 4.52 0 0 1-2.04.077 4.517 4.517 0 0 0 4.217 3.134 9.055 9.055 0 0 1-5.604 1.93A9.18 9.18 0 0 1 6 23.85a12.773 12.773 0 0 0 6.918 2.027c8.3 0 12.84-6.876 12.84-12.84 0-.195-.005-.39-.014-.583a9.172 9.172 0 0 0 2.252-2.336" fill-rule="evenodd"></path></g></svg></span></a>
<a class="addthis_button_print addthis_button_preferred_4 at300b" title="Print" href="http://www.smspower.org/Development/SMSOfficalDocs#"><span class="at-icon-wrapper" style="background-color: rgb(115, 138, 141); line-height: 16px; height: 16px; width: 16px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" title="Print" alt="Print" class="at-icon at-icon-print" style="width: 16px; height: 16px;"><g><path d="M24.67 10.62h-2.86V7.49H10.82v3.12H7.95c-.5 0-.9.4-.9.9v7.66h3.77v1.31L15 24.66h6.81v-5.44h3.77v-7.7c-.01-.5-.41-.9-.91-.9zM11.88 8.56h8.86v2.06h-8.86V8.56zm10.98 9.18h-1.05v-2.1h-1.06v7.96H16.4c-1.58 0-.82-3.74-.82-3.74s-3.65.89-3.69-.78v-3.43h-1.06v2.06H9.77v-3.58h13.09v3.61zm.75-4.91c-.4 0-.72-.32-.72-.72s.32-.72.72-.72c.4 0 .72.32.72.72s-.32.72-.72.72zm-4.12 2.96h-6.1v1.06h6.1v-1.06zm-6.11 3.15h6.1v-1.06h-6.1v1.06z"></path></g></svg></span></a>
<a class="addthis_button_compact at300m" href="http://www.smspower.org/Development/SMSOfficalDocs#"><span class="at-icon-wrapper" style="background-color: rgb(255, 101, 80); line-height: 16px; height: 16px; width: 16px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" title="More" alt="More" style="width: 16px; height: 16px;" class="at-icon at-icon-addthis"><g><path d="M18 14V8h-4v6H8v4h6v6h4v-6h6v-4h-6z" fill-rule="evenodd"></path></g></svg></span></a>
<a class="addthis_counter addthis_bubble_style" href="http://www.smspower.org/Development/SMSOfficalDocs#" style="display: inline-block;"><a class="addthis_button_expanded" target="_blank" href="http://www.smspower.org/Development/SMSOfficalDocs#" nicetitle="View more services">0</a><a class="atc_s addthis_button_compact">Share<span></span></a></a>
<div class="atclear"></div></div>
<script type="text/javascript">var addthis_config = {"data_track_clickback":true};</script>
<script type="text/javascript" src="./SMS Offical Docs - Development - SMS Power!_files/addthis_widget.js"></script>
<!-- AddThis Button END -->
	</div><div id="_atssh" style="visibility: hidden; height: 1px; width: 1px; position: absolute; top: -9999px; z-index: 100000;"><iframe id="_atssh478" title="AddThis utility frame" style="height: 1px; width: 1px; position: absolute; top: 0px; z-index: 100000; border: 0px; left: 0px;" src="./SMS Offical Docs - Development - SMS Power!_files/sh.5146487cc7ea4d7c00930dfb.html"></iframe></div><style id="service-icons-0"></style>
<!--PageFooterFmt-->
	<div><a href="http://www.smspower.org/Development/SMSOfficalDocs#top"><img src="./SMS Offical Docs - Development - SMS Power!_files/ReturnToTop.gif" alt=""></a><br><a href="http://www.smspower.org/Development/SMSOfficalDocs#top">Return to top</a><br><span style="font-size:69%">1.205s</span></div>

<!--/PageFooterFmt-->
<!--HTMLFooter-->
<script src="./SMS Offical Docs - Development - SMS Power!_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker('UA-11623675-1');
pageTracker._trackPageview();
} catch(err) {}
</script>

<div id="nicetitlecontainer" class="nicetitle" style="display: none; left: 1102px; top: 120px;"></div><script aria-hidden="true" type="application/x-lastpass" id="hiddenlpsubmitdiv" style="display: none;"></script><script>try{(function() { for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){ var lastpass_f = document.forms[lastpass_iter]; if(typeof(lastpass_f.lpsubmitorig2)=="undefined"){ lastpass_f.lpsubmitorig2 = lastpass_f.submit; if (typeof(lastpass_f.lpsubmitorig2)=='object'){ continue;}lastpass_f.submit = function(){ var form=this; var customEvent = document.createEvent("Event"); customEvent.initEvent("lpCustomEvent", true, true); var d = document.getElementById("hiddenlpsubmitdiv"); if (d) {for(var i = 0; i < document.forms.length; i++){ if(document.forms[i]==form){ if (typeof(d.innerText) != 'undefined') { d.innerText=i.toString(); } else { d.textContent=i.toString(); } } } d.dispatchEvent(customEvent); }form.lpsubmitorig2(); } } }})()}catch(e){}</script></body><div></div></html>